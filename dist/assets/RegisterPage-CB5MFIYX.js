import{d as S,u as j,r as c,a as k,b as q,o as h,c as M,e as o,w as d,f as y,g as m,h as p,i as z,t as L,j as T,k as W,n as Z,l as F,m as l,A as G,_ as H}from"./index-DaAjR9Ux.js";import{A as J,_ as K}from"./AuthMobileImage.vue_vue_type_script_setup_true_lang-mt0ckWHy.js";const O={class:"page-container"},Q=S({__name:"RegisterPage",setup(X){const{mdAndDown:b,smAndUp:f}=j(),v=c(!1),w=c(!1),u=c(""),i=c(""),g=c(!1),e=k({password:"",confirmPassword:"",email:"",firstName:"",lastName:""}),a=k({firstName:"",lastName:"",email:"",password:""}),C=F(),N=()=>{e.confirmPassword&&e.password!==e.confirmPassword?u.value="Пароли не совпадают":u.value=""},x=()=>{if(a.email="",!e.email)return;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(a.email="Некорректный формат электронной почты")},V=()=>{if(a.password="",!!e.password){if(e.password.length<8){a.password="Пароль должен содержать не менее 8 символов";return}if(!/[a-zA-Z]/.test(e.password)){a.password="Пароль должен содержать латинские буквы";return}if(!/\d/.test(e.password)){a.password="Пароль должен содержать цифры";return}if(!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e.password)){a.password="Пароль должен содержать специальные символы";return}e.confirmPassword&&e.password!==e.confirmPassword?u.value="Пароли не совпадают":u.value=""}},A=async()=>{var _,s;if(i.value="",x(),V(),N(),!(a.email||a.password||u.value)){g.value=!0;try{const t=await G.signup(e.email,e.password,e.firstName,e.lastName);C.push({path:"/verify",query:{email:e.email}})}catch(t){if(t.response){if((_=t.response.data)!=null&&_.message)i.value=t.response.data.message;else if((s=t.response.data)!=null&&s.errors){const r=t.response.data.errors;r.email&&(a.email=r.email),r.password&&(a.password=r.password),r.firstName&&(a.firstName=r.firstName),r.lastName&&(a.lastName=r.lastName)}else i.value=`Ошибка сервера: ${t.response.status}`;console.error("Ошибка сервера:",t.response.data),console.error("Код статуса:",t.response.status)}else t.request?(i.value="Не удалось связаться с сервером. Проверьте подключение к интернету.",console.error("Ошибка запроса:",t.request)):(i.value=`Произошла ошибка: ${t.message}`,console.error("Ошибка:",t.message))}finally{g.value=!1}}},$=q(()=>!e.email||!e.password||!e.firstName||!e.lastName||e.password!==e.confirmPassword||!!u.value||!!a.email||!!a.password||g.value);return(_,s)=>{const t=l("v-card-title"),r=l("v-text-field"),I=l("router-link"),P=l("v-card-text"),U=l("v-alert"),B=l("v-btn"),D=l("v-icon"),E=l("v-card"),R=l("v-container");return h(),M("div",O,[o(J),o(R,{class:"main-container"},{default:d(()=>[y("form",{onSubmit:W(A,["prevent"]),class:Z(["align-md-center d-flex flex-column",p(b)?"w-66":"w-50"])},[o(K),o(t,{class:"align-md-center justify-center d-flex pl-0 mb-3 font-weight-regular"},{default:d(()=>s[8]||(s[8]=[m(" Регистрация ")])),_:1}),o(r,{class:"w-100 font-weight-light",modelValue:e.lastName,"onUpdate:modelValue":s[0]||(s[0]=n=>e.lastName=n),label:"Фамилия",variant:"outlined",density:p(f)?"comfortable":"compact","error-messages":a.lastName},null,8,["modelValue","density","error-messages"]),o(r,{class:"w-100 font-weight-light",modelValue:e.firstName,"onUpdate:modelValue":s[1]||(s[1]=n=>e.firstName=n),label:"Имя",variant:"outlined",density:p(f)?"comfortable":"compact","error-messages":a.firstName},null,8,["modelValue","density","error-messages"]),o(r,{class:"w-100 font-weight-light",modelValue:e.email,"onUpdate:modelValue":s[2]||(s[2]=n=>e.email=n),label:"Почта",variant:"outlined",density:p(f)?"comfortable":"compact","error-messages":a.email,onInput:x},null,8,["modelValue","density","error-messages"]),o(r,{class:"w-100 mb-0 font-weight-light",label:"Пароль",hint:"Не менее 8 знаков: латинские буквы, цифры, спецсимволы",persistent:"",density:p(f)?"comfortable":"compact",variant:"outlined","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye",modelValue:e.password,"onUpdate:modelValue":s[3]||(s[3]=n=>e.password=n),type:v.value?"text":"password","onClick:appendInner":s[4]||(s[4]=n=>v.value=!v.value),"error-messages":a.password,onInput:V},null,8,["density","append-inner-icon","modelValue","type","error-messages"]),o(r,{class:"w-100 mb-0 font-weight-light",label:"Повторите пароль",variant:"outlined",density:p(f)?"comfortable":"compact","append-inner-icon":w.value?"mdi-eye-off":"mdi-eye",modelValue:e.confirmPassword,"onUpdate:modelValue":s[5]||(s[5]=n=>e.confirmPassword=n),type:w.value?"text":"password","onClick:appendInner":s[6]||(s[6]=n=>w.value=!w.value),"error-messages":u.value,onInput:N},null,8,["density","append-inner-icon","modelValue","type","error-messages"]),o(P,{class:"w-100 justify-center d-flex mt-0 pt-0 pl-0 font-weight-light"},{default:d(()=>[s[10]||(s[10]=m(" Уже есть аккаунт?   ")),o(I,{to:"/login"},{default:d(()=>s[9]||(s[9]=[m(" Войдите ")])),_:1})]),_:1}),i.value?(h(),z(U,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-3 w-100","onClick:close":s[7]||(s[7]=n=>i.value="")},{default:d(()=>[m(L(i.value),1)]),_:1})):T("",!0),o(B,{class:"text-none mb-2 w-100 font-weight-thin",text:"Создать профиль",type:"submit",density:p(b)?"compact":"comfortable",disabled:$.value,loading:g.value},null,8,["density","disabled","loading"]),o(E,{class:"info-card d-flex align-center mt-3 bg-color-none",rounded:"xm",variant:"outlined"},{default:d(()=>[o(D,{class:"info-icon ml-5",color:"black"},{default:d(()=>s[11]||(s[11]=[m(" mdi-information-outline ")])),_:1}),o(P,{class:"info--card font-weight-light px-3 py-2 mr-2"},{default:d(()=>s[12]||(s[12]=[m(" Создавая профиль, нажимая на кнопку, вы даёте "),y("a",{href:"Согласие на обработку персональных данных"}," согласие на обработку персональных данных ",-1),m(" и рассылку информационных сообщений "),y("a",{href:"https://www.consultant.ru/document/cons_doc_LAW_61801/",class:"link"}," согласно закону",-1),m(" О персональных данных от 27.07.2006 №152-ФЗ ")])),_:1})]),_:1})],34)]),_:1})])}}}),se=H(Q,[["__scopeId","data-v-46622252"]]);export{se as default};
