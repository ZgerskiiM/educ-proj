import{_ as U,u as M,r as w,m as l,o as d,c as y,e as t,w as e,h as V,f as n,t as b,g as m,F as j,l as dt,x as W,j as A,n as N,i as k,H as Y,A as J,y as Z,I as mt,b as X,p as ft,J as pt}from"./index-DaAjR9Ux.js";import{H as vt}from"./Header-BlLWUaW7.js";/* empty css                                                                  */const _t="/school_%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80_%D0%BF%D0%BE%D0%BB%D0%BD%D1%8B%D0%B9.png",gt="/telegram.png",bt="/vkontakte.png",ht="/Yandex_Zen_logo_icon.svg",xt={class:"d-flex flex-column flex-md-row justify-space-between"},yt={class:"text-md-left mb-4 mb-md-0"},wt={class:"footer-text font-weight-light text-grey"},kt={__name:"AppFooter",setup(a){const{mdAndDown:_}=M(),s=w(new Date().getFullYear());return(f,r)=>{const p=l("v-divider"),i=l("v-container"),c=l("v-footer");return d(),y(j,null,[t(p,{class:"mt-10"}),t(c,{class:"bg-transparent px-4 mb-2"},{default:e(()=>[t(i,{class:"mb-16",width:V(_)?"100vw":"80vw"},{default:e(()=>[n("div",xt,[n("div",yt,[r[0]||(r[0]=n("div",{class:"mb-2"},[n("img",{src:_t,alt:"Логотип",height:"40"})],-1)),n("div",wt," © "+b(s.value)+" Babich School ",1)]),r[1]||(r[1]=n("div",{class:"text-md-right text-left"},[n("div",null,[n("a",{href:"https://t.me/babichbaker_course",target:"_blank",class:"footer-text text-none text-decoration-none font-weight-light",rel:"noopener"}," Политика конфиденциальности ")]),n("div",null,[n("a",{href:"https://t.me/babichbaker_course",target:"_blank",class:"footer-text text-none text-decoration-none font-weight-light",rel:"noopener"}," Договор оферты ")]),n("div",{class:"footer-text font-weight-light mb-3 mt-3"},"Следите за школой"),n("div",{class:"d-flex flex-row justify-start justify-md-end gap-2 mb-5"},[n("a",{href:"https://t.me/maksbabich",target:"_blank",rel:"noopener"},[n("img",{src:gt,height:"35",width:"35",alt:"Telegram"})]),n("a",{href:"https://vk.com/babich.baker",target:"_blank",rel:"noopener",class:"mx-2"},[n("img",{src:bt,height:"35",width:"35",alt:"ВКонтакте"})]),n("a",{href:"https://dzen.ru/babichbaker",target:"_blank",rel:"noopener"},[n("img",{src:ht,height:"35",width:"35",alt:"Яндекс Дзен"})])]),n("div",{class:"font-weight-light footer-text mt-5"},[m(" Возникли вопросы? "),n("br"),n("a",{href:"https://t.me/babichbaker_course",target:"_blank",class:"footer-text text-none font-weight-light text-primary",rel:"noopener"}," Напишите в поддержку ")])],-1))])]),_:1},8,["width"])]),_:1})],64)}}},$t=U(kt,[["__scopeId","data-v-95feeb69"]]),Vt={key:0,class:"desktop-buttons mt-2 mb-2 d-flex"},Ct={class:"d-flex"},St={key:0},Dt={key:0,class:"mt-4 d-flex justify-end"},Ut={class:"d-flex gap-3"},H="http://45.12.228.30:8080",At={__name:"ProfileCard",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","logout"],setup(a,{emit:_}){const{mdAndDown:s}=M(),f=dt(),r=a,p=_,i=w(!1),c=w({...r.modelValue}),h=w(!1),D=()=>J.getToken();function C(u){u.target.src="/default-avatar.jpg"}async function F(){try{const u=D();if(!u){alert("Вы не авторизованы");return}if(await Y({method:"POST",url:`${H}/users/update-user`,params:{newFirstName:c.value.firstName,newLastName:c.value.lastName},headers:{Authorization:`Bearer ${u}`}}),B.value&&x.value){const o=new FormData;o.append("image",x.value);const g=await Y.post(`${H}/users/upload`,o,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${u}`}});c.value.imageUrl=g.data.imageUrl}p("update:modelValue",{...c.value}),i.value=!1,alert("Профиль успешно обновлен")}catch(u){console.error("Ошибка при обновлении профиля:",u),alert("Не удалось обновить профиль")}}const T=u=>u?u.startsWith("/")?`${H}${u}`:!u.startsWith("http://")&&!u.startsWith("https://")?`http://${u}`:u:"/default-avatar.jpg",v=u=>{if(!u)return"/public/default-lesson.jpg";let o=u.replace(/https:\/\/https:\/\//g,"https://");return o=o.replace(/https:\/\/https\//g,"https://"),o};W(()=>r.modelValue,u=>{i.value||(c.value={...u})},{deep:!0});function S(){c.value={...r.modelValue},i.value=!0}const x=w(null),B=w(!1);function I(u){if(u){x.value=u,B.value=!0;const o=new FileReader;o.onload=g=>{c.value.imageUrl=g.target.result},o.readAsDataURL(u)}}function E(){c.value={...r.modelValue},i.value=!1}function q(){h.value=!1,localStorage.removeItem("token"),localStorage.removeItem("user"),p("logout"),f.push("/login")}return(u,o)=>{const g=l("v-btn"),et=l("v-img"),ot=l("v-avatar"),lt=l("v-file-input"),G=l("v-col"),O=l("v-icon"),L=l("v-list-item-title"),R=l("v-list-item-subtitle"),z=l("v-list-item"),at=l("v-list"),P=l("v-text-field"),nt=l("v-form"),st=l("v-row"),K=l("v-card-text"),Q=l("v-card"),it=l("v-card-title"),rt=l("v-spacer"),ct=l("v-card-actions"),ut=l("v-dialog");return d(),y(j,null,[!V(s)&&!i.value?(d(),y("div",Vt,[n("div",Ct,[t(g,{class:"profile-card--button font-weight-light text-none",variant:"outlined",color:"#333132","prepend-icon":"mdi-pencil",onClick:S},{default:e(()=>o[7]||(o[7]=[m(" Редактировать ")])),_:1}),t(g,{class:"profile-card--button font-weight-light text-none ml-3",color:"error",variant:"outlined","prepend-icon":"mdi-logout",onClick:o[0]||(o[0]=$=>h.value=!0)},{default:e(()=>o[8]||(o[8]=[m(" Выйти ")])),_:1})]),t(g,{class:"profile-card--button font-weight-light text-none ml-auto",color:"primary",variant:"outlined","prepend-icon":"mdi-face-agent",href:"https://t.me/babichbaker_course",target:"_blank"},{default:e(()=>o[9]||(o[9]=[m(" Связаться с поддержкой ")])),_:1})])):A("",!0),t(Q,{class:"profile--card mb-5 rounded-xm"},{default:e(()=>[t(K,null,{default:e(()=>[t(st,null,{default:e(()=>[t(G,{class:N(["d-flex flex-column",{"justify-center align-center":V(s),"align-self-start":!V(s)}])},{default:e(()=>[t(ot,{size:"180",class:N(["mb-2 mt-2",{"align-self-start":!V(s)}])},{default:e(()=>[t(et,{src:v(T(a.modelValue.imageUrl)),alt:"Фото профиля",onError:C},null,8,["src"])]),_:1},8,["class"]),i.value?(d(),k(lt,{key:0,label:"Изменить фото",accept:"image/*","prepend-icon":"",variant:"outlined",density:"compact","hide-details":"",class:N(["mb-2",{"w-25 h-25":V(s),"max-width-250":!V(s)}]),style:{"max-height":"50px"},"onUpdate:modelValue":I},null,8,["class"])):A("",!0)]),_:1},8,["class"]),t(G,{cols:"12",md:"8"},{default:e(()=>[i.value?(d(),k(nt,{key:1},{default:e(()=>[o[18]||(o[18]=n("div",{class:"d-flex justify-space-between align-center mb-4"},[n("div",{class:"profile-card--text"},"Редактирование профиля")],-1)),t(P,{modelValue:c.value.firstName,"onUpdate:modelValue":o[2]||(o[2]=$=>c.value.firstName=$),label:"Имя",variant:"outlined",class:"mb-1",density:"compact"},null,8,["modelValue"]),t(P,{modelValue:c.value.lastName,"onUpdate:modelValue":o[3]||(o[3]=$=>c.value.lastName=$),label:"Фамилия",variant:"outlined",class:"mb-1",density:"compact"},null,8,["modelValue"]),t(P,{modelValue:c.value.email,"onUpdate:modelValue":o[4]||(o[4]=$=>c.value.email=$),label:"Email",variant:"outlined",class:"mb-1",density:"compact",disabled:""},null,8,["modelValue"]),n("div",Ut,[t(g,{class:"profile-card--button font-weight-light text-none",color:"#333132",onClick:F},{default:e(()=>o[16]||(o[16]=[m(" Сохранить ")])),_:1}),t(g,{color:"grey",variant:"outlined",onClick:E,class:"ml-2 profile-card--button font-weight-light text-none"},{default:e(()=>o[17]||(o[17]=[m(" Отмена ")])),_:1})])]),_:1})):(d(),y("div",St,[o[15]||(o[15]=n("div",{class:"d-flex justify-space-between align-center mb-4"},[n("div",{class:"profile-card--text"},"Личная информация")],-1)),t(at,{color:"#FAFAFA",class:N({"pa-0 list-left-aligned":!V(s)})},{default:e(()=>[t(z,null,{prepend:e(()=>[t(O,{icon:"mdi-account",class:"mr-2"})]),default:e(()=>[t(L,null,{default:e(()=>o[10]||(o[10]=[m("Имя")])),_:1}),t(R,null,{default:e(()=>[m(b(a.modelValue.firstName),1)]),_:1})]),_:1}),t(z,null,{prepend:e(()=>[t(O,{icon:"mdi-account-outline",class:"mr-2"})]),default:e(()=>[t(L,null,{default:e(()=>o[11]||(o[11]=[m("Фамилия")])),_:1}),t(R,null,{default:e(()=>[m(b(a.modelValue.lastName),1)]),_:1})]),_:1}),t(z,null,{prepend:e(()=>[t(O,{icon:"mdi-email",class:"mr-2"})]),default:e(()=>[t(L,null,{default:e(()=>o[12]||(o[12]=[m("Email")])),_:1}),t(R,null,{default:e(()=>[m(b(a.modelValue.email),1)]),_:1})]),_:1})]),_:1},8,["class"]),V(s)?(d(),y("div",Dt,[t(g,{class:"profile-card--button font-weight-light text-none",color:"#31331","prepend-icon":"mdi-pencil",variant:"outlined",onClick:S},{default:e(()=>o[13]||(o[13]=[m(" Редактировать ")])),_:1}),t(g,{class:"profile-card--button font-weight-light text-none ml-2",color:"error",variant:"outlined","prepend-icon":"mdi-logout",onClick:o[1]||(o[1]=$=>h.value=!0)},{default:e(()=>o[14]||(o[14]=[m(" Выйти ")])),_:1})])):A("",!0)]))]),_:1})]),_:1})]),_:1})]),_:1}),t(ut,{modelValue:h.value,"onUpdate:modelValue":o[6]||(o[6]=$=>h.value=$),"max-width":"400"},{default:e(()=>[t(Q,null,{default:e(()=>[t(it,null,{default:e(()=>o[19]||(o[19]=[m("Подтверждение")])),_:1}),t(K,{class:"font-weight-light"},{default:e(()=>o[20]||(o[20]=[m("Вы действительно хотите выйти из аккаунта?")])),_:1}),t(ct,null,{default:e(()=>[t(rt),t(g,{class:"profile-card--button font-weight-light text-none",variant:"outlined",text:"",onClick:o[5]||(o[5]=$=>h.value=!1)},{default:e(()=>o[21]||(o[21]=[m("Отмена")])),_:1}),t(g,{variant:"outlined",class:"profile-card--button font-weight-light text-none",color:"error",text:"",onClick:q},{default:e(()=>o[22]||(o[22]=[m("Выйти")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Nt=U(At,[["__scopeId","data-v-e67c8dd5"]]),jt={class:"position-relative"},Bt={class:"text-caption text-truncate-2 course-description"},Ft={__name:"CourseCard",props:{course:{type:Object,required:!0}},setup(a){return(_,s)=>{const f=l("v-img"),r=l("v-card-title"),p=l("v-card-text"),i=l("v-btn"),c=l("v-card-actions"),h=l("v-card");return d(),k(h,{rounded:"lg",elevation:"1",class:"cabinet-card d-flex flex-column overflow-x"},{default:e(()=>[n("div",jt,[t(f,{src:a.course.imageUrl,height:"250",cover:"",class:"rounded-t-lg",alt:a.course.title},null,8,["src","alt"])]),t(r,{class:"text-truncate"},{default:e(()=>[m(b(a.course.title),1)]),_:1}),t(p,{class:"py-1"},{default:e(()=>[s[0]||(s[0]=n("div",{class:"d-flex align-center mb-2"},null,-1)),n("div",Bt,b(a.course.description),1)]),_:1}),t(c,{class:"mt-auto"},{default:e(()=>[t(i,{variant:"flat",block:"",class:"card-btn-text text-none font-weight-regular w-50",color:"#333132","prepend-icon":"mdi-play",to:`/course/${a.course.id}`},{default:e(()=>[m(b(a.course.progress>0?"Продолжить":"Приступить"),1)]),_:1},8,["to"])]),_:1})]),_:1})}}},Tt=U(Ft,[["__scopeId","data-v-026995e5"]]),It={class:"filter-tabs mb-4"},Et={class:"flexible-filter-tabs"},qt={__name:"CourseFilterTabs",props:{modelValue:{type:String,required:!0},options:{type:Array,required:!0}},emits:["update:modelValue"],setup(a){return(_,s)=>{const f=l("v-btn");return d(),y("div",It,[n("div",Et,[(d(!0),y(j,null,Z(a.options,r=>(d(),k(f,{key:r.value,class:N(["filter-tab-btn font-weight-light",{"active-tab":a.modelValue===r.value}]),variant:"outlined",onClick:p=>_.$emit("update:modelValue",r.value)},{default:e(()=>[m(b(r.label),1)]),_:2},1032,["class","onClick"]))),128))])])}}},Ot=U(qt,[["__scopeId","data-v-90bdc0d0"]]),Lt={class:"mb-2"},Rt={class:"mb-6 text-grey"},zt={key:0,class:"tooltip-wrapper"},Pt={__name:"EmptyState",props:{icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},actionText:{type:String,default:""},actionRoute:{type:String,default:""},actionColor:{type:String,default:"#333132"}},setup(a){return(_,s)=>{const f=l("v-icon"),r=l("v-tooltip"),p=l("v-btn"),i=l("v-card");return d(),k(i,{rounded:"lg",elevation:"1",class:"empty-card d-flex flex-column align-center justify-center"},{default:e(()=>[t(f,{icon:a.icon,size:"64",color:"grey-lighten-1",class:"mb-4"},null,8,["icon"]),n("div",Lt,b(a.title),1),n("div",Rt,b(a.description),1),a.actionText?(d(),y("div",zt,[t(r,{location:"bottom",text:"Скоро будет доступно"},{activator:e(({props:c})=>[n("div",mt(c,{class:"w-100 h-100 position-absolute"}),null,16)]),_:1}),t(p,{color:a.actionColor,to:a.actionRoute,disabled:""},{default:e(()=>[m(b(a.actionText),1)]),_:1},8,["color","to"])])):A("",!0)]),_:1})}}},tt=U(Pt,[["__scopeId","data-v-bc09bd32"]]),Ht={class:"mb-8"},Wt={class:"d-flex justify-space-between align-center mb-4"},Yt={class:"font-weight-regular"},Jt={key:2,class:"text-center py-8 mt-0 pt-0"},Mt={__name:"index",props:{title:{type:String,default:"Мои курсы"},courses:{type:Array,required:!0},filterValue:{type:String,required:!0},filterOptions:{type:Array,required:!0},emptyState:{type:Object,default:()=>({icon:"mdi-school-outline",title:"У вас пока нет курсов",description:"Вы можете найти интересные курсы в нашем каталоге",actionText:"Перейти в каталог",actionRoute:"/catalog",actionDisabled:{type:Boolean,default:!1}})}},emits:["update:filter-value"],setup(a,{emit:_}){const s=a,f=_,r=w(s.filterValue);W(()=>s.filterValue,i=>{r.value=i}),W(r,i=>{f("update:filter-value",i)});const p=X(()=>{switch(r.value){case"not-started":return s.courses.filter(i=>i.progress===0);case"in-progress":return s.courses.filter(i=>i.progress>0&&i.progress<100);case"completed":return s.courses.filter(i=>i.progress===100);default:return s.courses}});return(i,c)=>{const h=l("v-col"),D=l("v-row");return d(),y("div",Ht,[n("div",Wt,[n("h2",Yt,b(a.title),1)]),a.filterOptions&&a.filterOptions.length?(d(),k(Ot,{key:0,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=C=>r.value=C),options:a.filterOptions},null,8,["modelValue","options"])):A("",!0),p.value.length>0?(d(),k(D,{key:1},{default:e(()=>[(d(!0),y(j,null,Z(p.value,C=>(d(),k(h,{key:C.id,cols:"12",sm:"6",lg:"3"},{default:e(()=>[t(Tt,{course:C},null,8,["course"])]),_:2},1024))),128))]),_:1})):(d(),y("div",Jt,[t(tt,{icon:a.emptyState.icon,title:a.emptyState.title,description:a.emptyState.description,"action-text":a.emptyState.actionText,"action-route":a.emptyState.actionRoute},null,8,["icon","title","description","action-text","action-route"])]))])}}},Zt={class:"position-relative"},Gt={class:"d-flex align-center mb-2"},Kt={class:"font-weight-light"},Qt={class:"text-caption"},Xt={__name:"CertificateCard",props:{certificate:{type:Object,required:!0}},emits:["download","open"],setup(a){return(_,s)=>{const f=l("v-img"),r=l("v-card-title"),p=l("v-icon"),i=l("v-card-text"),c=l("v-btn"),h=l("v-card-actions"),D=l("v-card");return d(),k(D,{rounded:"lg",elevation:"1",class:"cabinet-card d-flex flex-column overflow-x"},{default:e(()=>[n("div",Zt,[t(f,{src:a.certificate.image,height:"250",cover:"",class:"rounded-t-lg bg-grey-lighten-4",alt:`Сертификат: ${a.certificate.courseName}`},null,8,["src","alt"]),s[1]||(s[1]=n("div",{class:"certificate-badge"},null,-1))]),t(r,{class:"text-truncate"},{default:e(()=>[m(b(a.certificate.courseName),1)]),_:1}),t(i,{class:"py-1"},{default:e(()=>[n("div",Gt,[t(p,{icon:"mdi-calendar",size:"small",class:"mr-1"}),n("span",Kt,"Выдан: "+b(a.certificate.issueDate),1)]),n("div",Qt,[t(p,{icon:"mdi-certificate",size:"small",class:"mr-1"}),s[2]||(s[2]=n("span",null,"Профессиональный сертификат",-1))])]),_:1}),t(h,{class:"mt-auto d-flex align-center justify-center ml-2 mr-2"},{default:e(()=>[t(c,{color:"#333132",variant:"outlined","prepend-icon":"mdi-download",class:"card-btn-text text-none font-weight-regular w-100",onClick:s[0]||(s[0]=C=>_.$emit("download",a.certificate.id))},{default:e(()=>s[3]||(s[3]=[m(" Скачать ")])),_:1})]),_:1})]),_:1})}}},te=U(Xt,[["__scopeId","data-v-e3097342"]]),ee={class:"d-flex justify-space-between align-center mb-4"},oe={class:"font-weight-regular"},le={__name:"index",props:{title:{type:String,default:"Мои сертификаты"},certificates:{type:Array,required:!0},emptyState:{type:Object,default:()=>({icon:"mdi-certificate-outline",title:"У вас пока нет сертификатов",description:"Завершите курс, чтобы получить сертификат"})}},setup(a){const _=f=>{console.log("Скачивание сертификата:",f)},s=f=>{console.log("Открытие сертификата:",f)};return(f,r)=>{const p=l("v-col"),i=l("v-row");return d(),y("div",null,[n("div",ee,[n("h2",oe,b(a.title),1)]),t(i,null,{default:e(()=>[(d(!0),y(j,null,Z(a.certificates,c=>(d(),k(p,{key:c.id,cols:"12",sm:"6",lg:"3"},{default:e(()=>[t(te,{certificate:c,onDownload:_,onOpen:s},null,8,["certificate"])]),_:2},1024))),128)),a.certificates.length===0?(d(),k(p,{key:0,cols:"12"},{default:e(()=>[t(tt,{icon:a.emptyState.icon,title:a.emptyState.title,description:a.emptyState.description},null,8,["icon","title","description"])]),_:1})):A("",!0)]),_:1})])}}},ae="http://45.12.228.30:8080",ne={__name:"Profile",setup(a){const{mdAndDown:_}=M(),s=w("all"),f=w(!1),r=w({firstName:"",lastName:"",email:"",imageUrl:"https://w7.pngwing.com/pngs/215/58/png-transparent-computer-icons-google-account-scalable-graphics-computer-file-my-account-icon-rim-123rf-symbol.png"}),p=()=>J.getToken(),i=w([]);async function c(){try{if(f.value=!0,!J.getToken()){i.value=[];return}const S=await pt();i.value=S.map(x=>({id:x.id,title:x.title,imageUrl:x.imageUrl||"/public/main--menu3.png",progress:x.progress||0,lessonsCompleted:x.lessonsCompleted||0,totalLessons:x.totalLessons||0,certificateAvailable:x.certificateAvailable||!1}))}catch(v){console.error("Ошибка при получении курсов пользователя:",v),i.value=[]}finally{f.value=!1}}async function h(){try{f.value=!0;const v=await Y.get(`${ae}/users/me`,{headers:{Authorization:`Bearer ${p()}`}});r.value={firstName:v.data.firstName||"",lastName:v.data.lastName||"",email:v.data.email||"",imageUrl:v.data.imageUrl||"public/EmptyAvatar.png"}}catch(v){console.error("Ошибка при получении данных пользователя:",v)}finally{f.value=!1}}ft(()=>{h(),c()});const D=w("");function C(){r.value={firstName:"",lastName:"",email:"",imageUrl:""},localStorage.removeItem("jwt_token")}const F=[{value:"all",label:"Все курсы"},{value:"not-started",label:"Не начатые"},{value:"in-progress",label:"В процессе"},{value:"completed",label:"Завершенные"}],T=X(()=>{let v="";switch(s.value){case"not-started":v="У вас нет не начатых курсов";break;case"in-progress":v="У вас нет курсов в процессе";break;case"completed":v="У вас нет завершенных курсов";break;default:v="У вас пока нет курсов"}return{icon:"mdi-book-outline",title:v,description:"Выберите другой фильтр или перейдите в каталог",actionText:"Перейти в каталог",actionRoute:"/catalog"}});return(v,S)=>{const x=l("v-col"),B=l("v-row"),I=l("v-progress-circular"),E=l("v-overlay"),q=l("v-container"),u=l("v-main"),o=l("v-app");return d(),k(o,null,{default:e(()=>[t(vt),t(u,null,{default:e(()=>[t(q,{width:V(_)?"100vw":"80vw"},{default:e(()=>[t(B,{class:"mb-2"},{default:e(()=>[t(x,{cols:"12"},{default:e(()=>S[1]||(S[1]=[n("h1",{class:"font-weight-medium"},"Личный кабинет",-1)])),_:1})]),_:1}),t(E,{"model-value":f.value,contained:"",class:"align-center justify-center"},{default:e(()=>[t(I,{indeterminate:"",size:"64"})]),_:1},8,["model-value"]),t(Nt,{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=g=>r.value=g),class:"mb-8",onLogout:C},null,8,["modelValue"]),t(Mt,{courses:i.value,"filter-value":s.value,"filter-options":F,"empty-state":T.value},null,8,["courses","filter-value","empty-state"]),t(le,{certificates:D.value},null,8,["certificates"])]),_:1},8,["width"]),t($t)]),_:1})]),_:1})}}},ce=U(ne,[["__scopeId","data-v-0b51a481"]]);export{ce as default};
