import{_ as F,u as G,m as K,g as U,h as Q,i as W,j as X,r as d,o as n,s as w,w as o,a as s,f as C,b as t,c as p,e as l,v as f,t as D,A as S}from"./index-r6CkWk_M.js";const z="/logo1.webp",Y={class:"header-content"},Z={key:0,class:"left-section"},ee={class:"nav-links"},te={href:"https://t.me/babichbaker_course",target:"_blank",rel:"noopener",class:"nav-btn support-link"},oe={key:1,class:"mobile-header-content"},se={class:"mobile-right-section"},ne={key:2,class:"right-section"},le={key:0,class:"auth-buttons"},ae={class:"user-info"},ie={class:"user-name"},re={class:"mobile-menu"},ue={class:"menu-header"},de={class:"menu-content"},ce={class:"menu-navigation"},ve={key:0,class:"user-section"},me={class:"user-info-text"},pe={class:"user-name"},fe={key:1,class:"auth-section"},_e={__name:"Header",setup(ge){const{mdAndDown:T,smAndDown:y}=G(),_=K(),g=U(0),h=U(!1),r=U(null),c=U(!1),x=Q(()=>h.value&&r.value),L=()=>{_.push("/")},$=()=>{_.push("/profile")},E=()=>{_.push("/cart")},B=()=>{_.push("/login")},I=()=>{_.push("/register")},j=()=>{c.value=!c.value},H=()=>{c.value=!1},b=u=>{c.value=!1,_.push(u)},O=()=>{c.value=!1,window.open("https://t.me/babichbaker_course","_blank","noopener")},k=()=>{const u=localStorage.getItem("cart");if(u){const e=JSON.parse(u);g.value=e.length}else g.value=0},M=async()=>{if(h.value=S.isAuthenticated(),h.value)try{r.value=await S.getUserData()}catch(u){console.error("Error fetching user data:",u),h.value=!1,r.value=null}};return W(()=>{k(),M(),window.addEventListener("storage",k),window.addEventListener("cartUpdated",k),window.addEventListener("storage",u=>{u.key==="jwt_token"&&M()})}),X(()=>{window.removeEventListener("storage",k),window.removeEventListener("cartUpdated",k)}),(u,e)=>{const a=d("v-btn"),v=d("v-icon"),N=d("v-badge"),A=d("v-img"),V=d("v-avatar"),R=d("v-container"),J=d("v-app-bar"),P=d("v-overlay"),q=d("v-layout");return n(),w(q,{class:"mb-16"},{default:o(()=>[s(J,{class:"upper-wrapper justify-center",elevation:"0",height:"80",app:""},{default:o(()=>[s(R,{width:C(y)?"100vw":C(T)?"95vw":"60vw"},{default:o(()=>{var m;return[t("div",Y,[C(y)?f("",!0):(n(),p("div",Z,[t("div",{class:"logo"},[t("img",{src:z,class:"logo__img",style:{cursor:"pointer"},onClick:L})]),e[8]||(e[8]=t("div",{class:"divider"},null,-1)),t("div",ee,[s(a,{color:"white",to:"/catalog",class:"nav-btn",variant:"text"},{default:o(()=>e[6]||(e[6]=[l("Каталог")])),_:1}),t("a",te,[s(a,{color:"white",variant:"text"},{default:o(()=>e[7]||(e[7]=[t("span",{class:"nav-btn"},"Поддержка",-1)])),_:1})])])])),C(y)?(n(),p("div",oe,[t("div",{class:"mobile-logo-section"},[t("img",{src:z,class:"mobile-full-logo",onClick:L})]),t("div",se,[t("div",{class:"cart-container",onClick:E},[s(N,{content:g.value,"model-value":g.value>0,color:"red","offset-x":"8","offset-y":"8"},{default:o(()=>[s(a,{icon:"",variant:"text",color:"white",size:"small"},{default:o(()=>[s(v,{size:"20"},{default:o(()=>e[9]||(e[9]=[l("mdi-cart-outline")])),_:1})]),_:1})]),_:1},8,["content","model-value"])]),s(a,{icon:"",variant:"text",color:"white",onClick:j,class:"menu-toggle-btn"},{default:o(()=>[s(v,{size:"24"},{default:o(()=>e[10]||(e[10]=[l("mdi-menu")])),_:1})]),_:1})])])):f("",!0),C(y)?f("",!0):(n(),p("div",ne,[t("div",{class:"cart-container",onClick:E},[s(N,{content:g.value,"model-value":g.value>0,color:"red","offset-x":"10","offset-y":"10"},{default:o(()=>[s(a,{icon:"",variant:"text",color:"white"},{default:o(()=>[s(v,null,{default:o(()=>e[11]||(e[11]=[l("mdi-cart-outline")])),_:1})]),_:1})]),_:1},8,["content","model-value"])]),x.value?f("",!0):(n(),p("div",le,[s(a,{onClick:B,color:"white",variant:"outlined",class:"auth-btn",size:"small"},{default:o(()=>e[12]||(e[12]=[l(" Войти ")])),_:1}),s(a,{onClick:I,color:"white",variant:"flat",class:"auth-btn register-btn",size:"small"},{default:o(()=>e[13]||(e[13]=[l(" Регистрация ")])),_:1})])),x.value?(n(),p("div",{key:1,class:"profile-container",onClick:$},[t("div",ae,[t("span",ie,D(((m=r.value)==null?void 0:m.firstName)||"Пользователь"),1)]),s(V,{class:"profile-avatar",rounded:""},{default:o(()=>{var i;return[(i=r.value)!=null&&i.imageUrl?(n(),w(A,{key:0,src:r.value.imageUrl},null,8,["src"])):(n(),w(A,{key:1,src:"/user.png",class:"black-icon"}))]}),_:1})])):f("",!0)]))])]}),_:1},8,["width"])]),_:1}),s(P,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=m=>c.value=m),class:"mobile-menu-overlay","z-index":9999},{default:o(()=>{var m;return[t("div",re,[t("div",ue,[t("img",{src:z,class:"menu-logo",onClick:L}),s(a,{icon:"",variant:"text",color:"white",onClick:H,class:"close-btn"},{default:o(()=>[s(v,{size:"28"},{default:o(()=>e[14]||(e[14]=[l("mdi-close")])),_:1})]),_:1})]),t("div",de,[t("div",ce,[t("div",{class:"menu-item",onClick:e[0]||(e[0]=i=>b("/"))},[s(v,{color:"#f48a21",class:"menu-item-icon"},{default:o(()=>e[15]||(e[15]=[l("mdi-home-outline")])),_:1}),e[16]||(e[16]=t("span",null,"Главная",-1))]),t("div",{class:"menu-item",onClick:e[1]||(e[1]=i=>b("/catalog"))},[s(v,{color:"#f48a21",class:"menu-item-icon"},{default:o(()=>e[17]||(e[17]=[l("mdi-view-grid-outline")])),_:1}),e[18]||(e[18]=t("span",null,"Каталог",-1))]),t("div",{class:"menu-item",onClick:O},[s(v,{color:"#f48a21",class:"menu-item-icon"},{default:o(()=>e[19]||(e[19]=[l("mdi-help-circle-outline")])),_:1}),e[20]||(e[20]=t("span",null,"Поддержка",-1))])]),e[24]||(e[24]=t("div",{class:"menu-divider"},null,-1)),x.value?(n(),p("div",ve,[t("div",{class:"user-avatar-section",onClick:e[2]||(e[2]=i=>b("/profile"))},[s(V,{class:"profile-avatar",rounded:""},{default:o(()=>{var i;return[(i=r.value)!=null&&i.imageUrl?(n(),w(A,{key:0,src:r.value.imageUrl},null,8,["src"])):(n(),w(A,{key:1,src:"/user.png",class:"black-icon"}))]}),_:1}),t("div",me,[t("span",pe,D(((m=r.value)==null?void 0:m.firstName)||"Пользователь"),1),e[21]||(e[21]=t("span",{class:"user-action"},"Перейти в профиль",-1))])])])):f("",!0),x.value?f("",!0):(n(),p("div",fe,[s(a,{onClick:e[3]||(e[3]=i=>b("/login")),color:"white",variant:"outlined",class:"auth-btn mobile-auth-btn",block:""},{default:o(()=>e[22]||(e[22]=[l(" Войти ")])),_:1}),s(a,{onClick:e[4]||(e[4]=i=>b("/register")),color:"white",variant:"flat",class:"auth-btn mobile-auth-btn register-btn",block:""},{default:o(()=>e[23]||(e[23]=[l(" Регистрация ")])),_:1})]))])])]}),_:1},8,["modelValue"])]),_:1})}}},ke=F(_e,[["__scopeId","data-v-d956b57a"]]);export{ke as A};
