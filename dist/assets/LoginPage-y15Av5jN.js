import{d as B,u as D,r as c,a as b,b as N,o as x,c as U,e as s,w as i,f as j,g as p,l as E,t as M,m as P,h as f,i as T,n as z,j as F,k as l,A as v,_ as R}from"./index-_IANILbF.js";import{A as q,_ as G}from"./AuthMobileImage.vue_vue_type_script_setup_true_lang-DYkWRdk7.js";const H={class:"page-container"},J=B({__name:"LoginPage",setup(K){const{mdAndDown:y,smAndUp:g}=D(),r=F(),d=c(!1),m=c(!1),u=c(""),t=b({password:"",email:""}),o=b({password:"",email:""}),V=()=>{r.push("/register")},k=()=>{let n=!0;return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(o.email="Введите корректный email",n=!1):(o.email="Введите email",n=!1),t.password||(o.password="Введите пароль",n=!1),n},A=async()=>{if(k())try{m.value=!0,u.value="";const n=await v.login(t.email,t.password),e=localStorage.getItem("redirectAfterLogin");localStorage.removeItem("redirectAfterLogin"),e?e.includes("/admin")&&!v.isAdmin()?(r.push("/"),localStorage.setItem("accessError","Доступ к административной панели запрещен")):r.push(e):v.isAdmin()?r.push("/admin"):r.push("/course")}catch{}finally{m.value=!1}},S=N(()=>!t.email||!t.password||m.value);return(n,e)=>{const C=l("v-card-title"),I=l("v-alert"),w=l("v-text-field"),L=l("router-link"),$=l("v-card-text"),_=l("v-btn"),h=l("v-container");return x(),U("div",H,[s(q),s(h,{class:"main-container"},{default:i(()=>[j("form",{onSubmit:T(A,["prevent"]),class:z(["align-md-center d-flex flex-column",f(y)?"w-66":"w-50"])},[s(G),s(C,{class:"align-md-center justify-center d-flex pl-0 mb-3 font-weight-regular"},{default:i(()=>e[7]||(e[7]=[p(" Вход ")])),_:1}),u.value?(x(),E(I,{key:0,type:"error",variant:"tonal",class:"mb-4 w-100",closable:"","onClick:close":e[0]||(e[0]=a=>u.value="")},{default:i(()=>[p(M(u.value),1)]),_:1})):P("",!0),s(w,{class:"w-100 font-weight-light",modelValue:t.email,"onUpdate:modelValue":e[1]||(e[1]=a=>t.email=a),label:"Логин",variant:"outlined",density:f(g)?"comfortable":"compact","error-messages":o.email,onInput:e[2]||(e[2]=a=>o.email="")},null,8,["modelValue","density","error-messages"]),s(w,{class:"w-100 mb-0 font-weight-light",label:"Пароль",density:f(g)?"comfortable":"compact",variant:"outlined","append-inner-icon":d.value?"mdi-eye-off":"mdi-eye",modelValue:t.password,"onUpdate:modelValue":e[3]||(e[3]=a=>t.password=a),type:d.value?"text":"password","onClick:appendInner":e[4]||(e[4]=a=>d.value=!d.value),"error-messages":o.password,onInput:e[5]||(e[5]=a=>o.password="")},null,8,["density","append-inner-icon","modelValue","type","error-messages"]),s($,{class:"w-100 justify-center d-flex mt-0 pt-0 pl-0 font-weight-light"},{default:i(()=>[e[9]||(e[9]=p(" Забыли пароль?   ")),s(L,{to:"reset-password"},{default:i(()=>e[8]||(e[8]=[p(" Восстановить ")])),_:1})]),_:1}),s(_,{class:"text-none mb-2 w-100 font-weight-thin",type:"submit",text:"Войти",loading:m.value,disabled:S.value,flat:""},null,8,["loading","disabled"]),s(_,{class:"text-none mb-2 w-100 font-weight-thin",text:"Создать аккаунт",onClick:e[6]||(e[6]=a=>V()),flat:""})],34)]),_:1})])}}}),W=R(J,[["__scopeId","data-v-a4eb047a"]]);export{W as default};
