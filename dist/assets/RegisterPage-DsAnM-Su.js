import{d as L,u as Z,r as y,a as h,c,o as B,b as F,e as l,w as m,f as k,g as p,h as u,i as G,t as H,j as J,k as O,n as Q,l as X,m as i,A as Y,_ as ee}from"./index-BVJ0uYsb.js";import{A as se,_ as ae}from"./AuthMobileImage.vue_vue_type_script_setup_true_lang-jNiSyNmu.js";const te={class:"page-container"},oe=L({__name:"RegisterPage",setup(re){const{mdAndDown:D,smAndUp:f}=Z(),b=y(!1),N=y(!1),w=y(""),d=y(""),x=y(!1),s=h({password:"",confirmPassword:"",email:"",firstName:"",lastName:""}),a=h({firstName:"",lastName:"",email:"",password:""}),E=X(),S=c({get:()=>s.firstName,set:o=>{s.firstName=o.replace(/\s+/g,""),a.firstName=""}}),C=c({get:()=>s.lastName,set:o=>{s.lastName=o.replace(/\s+/g,""),a.lastName=""}}),A=c({get:()=>s.email,set:o=>{s.email=o.replace(/\s+/g,""),a.email=""}}),$=c({get:()=>s.password,set:o=>{s.password=o.replace(/\s+/g,""),a.password=""}}),I=c({get:()=>s.confirmPassword,set:o=>{s.confirmPassword=o.replace(/\s+/g,""),_()}}),v=o=>{(o.key===" "||o.key==="Spacebar")&&o.preventDefault()},g=(o,e)=>{o.preventDefault();const V=(o.clipboardData||window.clipboardData).getData("text").replace(/\s+/g,"");s[e]=V,a[e]&&(a[e]=""),(e==="password"||e==="confirmPassword")&&_()},_=()=>{s.confirmPassword&&s.password!==s.confirmPassword?w.value="Пароли не совпадают":w.value=""},U=()=>{if(a.email="",!s.email)return;/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(a.email="Некорректный формат электронной почты")},P=()=>{if(a.password="",!!s.password){if(s.password.length<8){a.password="Пароль должен содержать не менее 8 символов";return}if(!/[a-zA-Z]/.test(s.password)){a.password="Пароль должен содержать латинские буквы";return}if(!/\d/.test(s.password)){a.password="Пароль должен содержать цифры";return}if(!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(s.password)){a.password="Пароль должен содержать специальные символы";return}_()}},K=async()=>{var o,e;if(d.value="",U(),P(),_(),!(a.email||a.password||w.value)){x.value=!0;try{const r=await Y.signup(s.email,s.password,s.firstName,s.lastName);E.push({path:"/verify",query:{email:s.email}})}catch(r){if(r.response){if((o=r.response.data)!=null&&o.message)d.value=r.response.data.message;else if((e=r.response.data)!=null&&e.errors){const n=r.response.data.errors;n.email&&(a.email=n.email),n.password&&(a.password=n.password),n.firstName&&(a.firstName=n.firstName),n.lastName&&(a.lastName=n.lastName)}else d.value=`Ошибка сервера: ${r.response.status}`;console.error("Ошибка сервера:",r.response.data),console.error("Код статуса:",r.response.status)}else r.request?(d.value="Не удалось связаться с сервером. Проверьте подключение к интернету.",console.error("Ошибка запроса:",r.request)):(d.value=`Произошла ошибка: ${r.message}`,console.error("Ошибка:",r.message))}finally{x.value=!1}}},R=c(()=>!s.email||!s.password||!s.firstName||!s.lastName||s.password!==s.confirmPassword||!!w.value||!!a.email||!!a.password||x.value);return(o,e)=>{const r=i("v-card-title"),n=i("v-text-field"),V=i("router-link"),W=i("v-card-text"),T=i("v-alert"),j=i("v-btn"),q=i("v-icon"),M=i("v-card"),z=i("v-container");return B(),F("div",te,[l(se),l(z,{class:"main-container"},{default:m(()=>[k("form",{onSubmit:O(K,["prevent"]),class:Q(["align-md-center d-flex flex-column",u(D)?"w-66":"w-50"])},[l(ae),l(r,{class:"align-md-center justify-center d-flex pl-0 mb-3 font-weight-regular"},{default:m(()=>e[13]||(e[13]=[p(" Регистрация ")])),_:1}),l(n,{class:"w-100 font-weight-light",modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value=t),label:"Фамилия",variant:"outlined",density:u(f)?"comfortable":"compact","error-messages":a.lastName,onKeydown:v,onPaste:e[1]||(e[1]=t=>g(t,"lastName"))},null,8,["modelValue","density","error-messages"]),l(n,{class:"w-100 font-weight-light",modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=t=>S.value=t),label:"Имя",variant:"outlined",density:u(f)?"comfortable":"compact","error-messages":a.firstName,onKeydown:v,onPaste:e[3]||(e[3]=t=>g(t,"firstName"))},null,8,["modelValue","density","error-messages"]),l(n,{class:"w-100 font-weight-light",modelValue:A.value,"onUpdate:modelValue":e[4]||(e[4]=t=>A.value=t),label:"Почта",variant:"outlined",density:u(f)?"comfortable":"compact","error-messages":a.email,onInput:U,onKeydown:v,onPaste:e[5]||(e[5]=t=>g(t,"email"))},null,8,["modelValue","density","error-messages"]),l(n,{class:"w-100 mb-0 font-weight-light",label:"Пароль",hint:"Не менее 8 знаков: латинские буквы, цифры, спецсимволы",persistent:"",density:u(f)?"comfortable":"compact",variant:"outlined","append-inner-icon":b.value?"mdi-eye-off":"mdi-eye",modelValue:$.value,"onUpdate:modelValue":e[6]||(e[6]=t=>$.value=t),type:b.value?"text":"password","onClick:appendInner":e[7]||(e[7]=t=>b.value=!b.value),"error-messages":a.password,onInput:P,onKeydown:v,onPaste:e[8]||(e[8]=t=>g(t,"password"))},null,8,["density","append-inner-icon","modelValue","type","error-messages"]),l(n,{class:"w-100 mb-0 font-weight-light",label:"Повторите пароль",variant:"outlined",density:u(f)?"comfortable":"compact","append-inner-icon":N.value?"mdi-eye-off":"mdi-eye",modelValue:I.value,"onUpdate:modelValue":e[9]||(e[9]=t=>I.value=t),type:N.value?"text":"password","onClick:appendInner":e[10]||(e[10]=t=>N.value=!N.value),"error-messages":w.value,onInput:P,onKeydown:v,onPaste:e[11]||(e[11]=t=>g(t,"confirmPassword"))},null,8,["density","append-inner-icon","modelValue","type","error-messages"]),l(W,{class:"w-100 justify-center d-flex mt-0 pt-0 pl-0 font-weight-light"},{default:m(()=>[e[15]||(e[15]=p(" Уже есть аккаунт?   ")),l(V,{to:"/login"},{default:m(()=>e[14]||(e[14]=[p(" Войдите ")])),_:1})]),_:1}),d.value?(B(),G(T,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-3 w-100","onClick:close":e[12]||(e[12]=t=>d.value="")},{default:m(()=>[p(H(d.value),1)]),_:1})):J("",!0),l(j,{class:"text-none mb-2 w-100 font-weight-thin",text:"Создать профиль",type:"submit",density:u(D)?"compact":"comfortable",disabled:R.value,loading:x.value},null,8,["density","disabled","loading"]),l(M,{class:"info-card d-flex align-center mt-3 bg-color-none",rounded:"xm",variant:"outlined"},{default:m(()=>[l(q,{class:"info-icon ml-5",color:"black"},{default:m(()=>e[16]||(e[16]=[p(" mdi-information-outline ")])),_:1}),l(W,{class:"info--card font-weight-light px-3 py-2 mr-2"},{default:m(()=>e[17]||(e[17]=[p(" Создавая профиль, нажимая на кнопку, вы даёте "),k("a",{href:"Согласие на обработку персональных данных"}," согласие на обработку персональных данных ",-1),p(" и рассылку информационных сообщений "),k("a",{href:"https://www.consultant.ru/document/cons_doc_LAW_61801/",class:"link"}," согласно закону",-1),p(" О персональных данных от 27.07.2006 №152-ФЗ ")])),_:1})]),_:1})],34)]),_:1})])}}}),ie=ee(oe,[["__scopeId","data-v-263bcabd"]]);export{ie as default};
