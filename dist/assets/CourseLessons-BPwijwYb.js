import{H as z,A as W}from"./AppFooter-4xhL_aov.js";import{d as B,u as S,c as y,m as n,o as c,i as A,w as r,e as t,f as d,t as a,b as i,n as E,j as J,h as x,_ as N,r as o,p as K,g as h,F as Q,y as X,q as Y,l as Z,D as ee}from"./index-D_oD8h-s.js";import{c as se}from"./courseUserService-BmvocA1L.js";const te={class:"pa-4"},oe={class:"card-text d-flex flex-wrap"},ae={class:"font-weight-bold mr-1"},re={class:"font-weight-light"},ce=B({__name:"LessonCard",props:{courseData:{type:Object,required:!0}},emits:["click"],setup(l){const{mdAndDown:m}=S(),v=l,C=y(()=>{switch(v.courseData.progress){case"IN_PROGRESS":return"В процессе";case"COMPLETED":return"Завершено";default:return"Не начато"}}),u=y(()=>{switch(v.courseData.progress){case"IN_PROGRESS":return"progress-in-progress";case"COMPLETED":return"progress-completed";default:return"progress-not-started"}});return(b,_)=>{const k=n("v-img"),f=n("v-card");return c(),A(f,{onClick:_[0]||(_[0]=D=>b.$emit("click",l.courseData.id)),class:"course-lessons rounded-lg",width:x(m)?"50vw":"14vw",elevation:"1"},{default:r(()=>[t(k,{src:l.courseData.imagePath,class:"responsive-image rounded-t","aspect-ratio":16/9,cover:""},null,8,["src"]),d("div",te,[d("div",oe,[d("span",ae,a(l.courseData.number)+" /",1),d("span",re,a(l.courseData.title),1)]),l.courseData.progress?(c(),i("div",{key:0,class:E(["progress-badge mt-2",u.value])},a(C.value),3)):J("",!0)])]),_:1},8,["width"])}}}),ne=N(ce,[["__scopeId","data-v-cfe78874"]]),le={class:"page-wrapper"},ue={class:"info"},ie={class:"mt-5 font-weight-medium"},de={class:"mb-2 font-weight-regular"},ve={key:0,class:"breadcrumbs-container"},pe={key:1,class:"back-button-container pt-4 pb-2 pl-0 ml-0"},me={key:0,class:"text-center w-100"},_e={key:1,class:"text-center w-100 red--text"},fe=B({__name:"CourseLessons",setup(l){const{mdAndDown:m}=S(),v=Y(),C=Z(),u=y(()=>v.params.courseId),b=y(()=>v.params.keysId),_=o(null),k=o(null),f=o(""),D=o([]),P=o("Авторский курс от Максима Бабича"),R=o("1"),I=o(""),g=o(!0),p=o(""),T=o([]),F=e=>{if(!e)return"/public/default-lesson.jpg";let s=e.replace(/https:\/\/https:\/\//g,"https://");return s=s.replace(/https:\/\/https\//g,"https://"),s},O=async e=>{if(e){g.value=!0,p.value="";try{const s=await se.fetchCourseWithBlocks(e);f.value=s.courseTitle||"Курс без названия",D.value=s.keys||[],_.value=s.imageUrl||null}catch(s){console.error("Ошибка при загрузке курса:",s),p.value="Не удалось загрузить данные курса. Пожалуйста, попробуйте позже.",D.value=[]}finally{g.value=!1}}},U=async()=>{g.value=!0,p.value="";try{const e=await ee(b.value);I.value=e.blockTitle,T.value=e.lessons,k.value=e.imageUrl||null}catch(e){p.value="Не удалось загрузить данные уроков",console.error(e)}finally{g.value=!1}},V=e=>{C.push(`/course/${u.value}/blocks/${b.value}/lessons/${e}`)};return K(()=>{const e=v.params.courseId;e&&(u.value=e,O(e)),U()}),(e,s)=>{const $=n("v-breadcrumbs-item"),j=n("v-breadcrumbs"),M=n("v-btn"),q=n("v-card-title"),G=n("v-progress-circular"),L=n("v-container");return c(),i("div",le,[t(z),t(L,{width:x(m)?"100vw":"60vw"},{default:r(()=>[d("div",ue,[d("h2",ie,a(f.value),1),d("h3",de,a(P.value),1)]),x(m)?(c(),i("div",pe,[t(M,{variant:"outlined",density:"comfortable",to:`/course/${u.value}`,class:"back-button text-none"},{default:r(()=>s[1]||(s[1]=[h(" К блокам ")])),_:1},8,["to"])])):(c(),i("div",ve,[t(j,{class:"mb-1 pl-0 font-weight-light",color:"#F48A21"},{default:r(()=>[t($,{to:"/lk"},{default:r(()=>s[0]||(s[0]=[h("Профиль")])),_:1}),t($,{to:`/course/${u.value}`},{default:r(()=>[h(a(f.value),1)]),_:1},8,["to"]),t($,{disabled:"",to:`/course/${u.value}/blocks`},{default:r(()=>[h(a(I.value),1)]),_:1},8,["to"])]),_:1})])),t(q,{class:"course-title font-weight-bold pt-0 pl-0",style:{color:"#333132"}},{default:r(()=>[h(" Блок "+a(R.value)+" / "+a(I.value),1)]),_:1}),t(L,{class:E(x(m)?"d-flex flex-row flex-wrap ga-5 ml-0 pl-0 mr-0 pr-0":"d-flex flex-row flex-wrap ga-5 ml-0 pl-0 align-center")},{default:r(()=>[g.value?(c(),i("div",me,[t(G,{indeterminate:"",color:"#F48A21"})])):p.value?(c(),i("div",_e,a(p.value),1)):(c(!0),i(Q,{key:2},X(T.value,(w,H)=>(c(),A(ne,{key:w.lessonId,"course-data":{id:w.lessonId,number:String(H+1).padStart(2,"0"),title:w.lessonTitle,imagePath:F(_.value||k.value)},onClick:ge=>V(w.lessonId)},null,8,["course-data","onClick"]))),128))]),_:1},8,["class"])]),_:1},8,["width"]),t(W)])}}}),we=N(fe,[["__scopeId","data-v-7195b136"]]);export{we as default};
