import{_ as U,u as Z,r as y,m as l,o as d,b as w,e as t,w as e,h as V,f as n,t as g,g as m,F as j,l as ft,x as J,c as G,j as A,n as N,i as k,I as K,A as M,y as Q,J as vt,p as pt,K as _t}from"./index-Cuu_6W6T.js";import{H as gt}from"./Header-DrkxdePr.js";/* empty css                                                                  */const bt="/school_%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80_%D0%BF%D0%BE%D0%BB%D0%BD%D1%8B%D0%B9.png",ht="/telegram.png",xt="/vkontakte.png",yt="/Yandex_Zen_logo_icon.svg",wt={class:"d-flex flex-column flex-md-row justify-space-between"},kt={class:"text-md-left mb-4 mb-md-0"},$t={class:"footer-text font-weight-light text-grey"},Vt={__name:"AppFooter",setup(a){const{mdAndDown:_}=Z(),s=y(new Date().getFullYear());return(f,r)=>{const v=l("v-divider"),i=l("v-container"),c=l("v-footer");return d(),w(j,null,[t(v,{class:"mt-10"}),t(c,{class:"bg-transparent px-4 mb-2"},{default:e(()=>[t(i,{class:"mb-16",width:V(_)?"100vw":"80vw"},{default:e(()=>[n("div",wt,[n("div",kt,[r[0]||(r[0]=n("div",{class:"mb-2"},[n("img",{src:bt,alt:"Логотип",height:"40"})],-1)),n("div",$t," © "+g(s.value)+" Babich School ",1)]),r[1]||(r[1]=n("div",{class:"text-md-right text-left"},[n("div",null,[n("a",{href:"https://t.me/babichbaker_course",target:"_blank",class:"footer-text text-none text-decoration-none font-weight-light",rel:"noopener"}," Политика конфиденциальности ")]),n("div",null,[n("a",{href:"https://t.me/babichbaker_course",target:"_blank",class:"footer-text text-none text-decoration-none font-weight-light",rel:"noopener"}," Договор оферты ")]),n("div",{class:"footer-text font-weight-light mb-3 mt-3"},"Следите за школой"),n("div",{class:"d-flex flex-row justify-start justify-md-end gap-2 mb-5"},[n("a",{href:"https://t.me/maksbabich",target:"_blank",rel:"noopener"},[n("img",{src:ht,height:"35",width:"35",alt:"Telegram"})]),n("a",{href:"https://vk.com/babich.baker",target:"_blank",rel:"noopener",class:"mx-2"},[n("img",{src:xt,height:"35",width:"35",alt:"ВКонтакте"})]),n("a",{href:"https://dzen.ru/babichbaker",target:"_blank",rel:"noopener"},[n("img",{src:yt,height:"35",width:"35",alt:"Яндекс Дзен"})])]),n("div",{class:"font-weight-light footer-text mt-5"},[m(" Возникли вопросы? "),n("br"),n("a",{href:"https://t.me/babichbaker_course",target:"_blank",class:"footer-text text-none font-weight-light text-primary",rel:"noopener"}," Напишите в поддержку ")])],-1))])]),_:1},8,["width"])]),_:1})],64)}}},Ct=U(Vt,[["__scopeId","data-v-95feeb69"]]),Dt={key:0,class:"desktop-buttons mt-2 mb-2 d-flex"},St={class:"d-flex"},Ut={key:0},At={key:0,class:"mt-4 d-flex justify-end"},Nt={class:"d-flex gap-3"},H="https://babichschool.ru:8080",jt={__name:"ProfileCard",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue","logout"],setup(a,{emit:_}){const{mdAndDown:s}=Z(),f=ft(),r=a,v=_,i=y(!1),c=y({...r.modelValue}),b=y(!1),S=()=>M.getToken();function C(u){u.target.src="/default-avatar.jpg"}async function F(){try{const u=S();if(!u){alert("Вы не авторизованы");return}if(await K({method:"POST",url:`${H}/users/update-user`,params:{newFirstName:c.value.firstName,newLastName:c.value.lastName},headers:{Authorization:`Bearer ${u}`}}),B.value&&h.value){const o=new FormData;o.append("image",h.value);const x=await K.post(`${H}/users/upload`,o,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${u}`}});c.value.imageUrl=x.data.imageUrl}v("update:modelValue",{...c.value}),i.value=!1,alert("Профиль успешно обновлен")}catch(u){console.error("Ошибка при обновлении профиля:",u),alert("Не удалось обновить профиль")}}const I=u=>u?u.startsWith("/")?`${H}${u}`:!u.startsWith("http://")&&!u.startsWith("https://")?`http://${u}`:u:"/default-avatar.jpg",p=u=>{if(!u)return"/public/default-lesson.jpg";let o=u.replace(/https:\/\/https:\/\//g,"https://");return o=o.replace(/https:\/\/https\//g,"https://"),o};J(()=>r.modelValue,u=>{i.value||(c.value={...u})},{deep:!0});function D(){c.value={...r.modelValue},i.value=!0}const h=y(null),B=y(!1);function T(u){if(u){h.value=u,B.value=!0;const o=new FileReader;o.onload=x=>{c.value.imageUrl=x.target.result},o.readAsDataURL(u)}}function E(){c.value={...r.modelValue},i.value=!1}const q=y(!1),O=G(()=>q.value?"/EmptyAvatar.png":p(I(r.modelValue.imageUrl)));function L(){b.value=!1,localStorage.removeItem("token"),localStorage.removeItem("user"),v("logout"),f.push("/login")}return(u,o)=>{const x=l("v-btn"),lt=l("v-img"),at=l("v-avatar"),nt=l("v-file-input"),X=l("v-col"),R=l("v-icon"),z=l("v-list-item-title"),P=l("v-list-item-subtitle"),W=l("v-list-item"),st=l("v-list"),Y=l("v-text-field"),it=l("v-form"),rt=l("v-row"),tt=l("v-card-text"),et=l("v-card"),ct=l("v-card-title"),ut=l("v-spacer"),dt=l("v-card-actions"),mt=l("v-dialog");return d(),w(j,null,[!V(s)&&!i.value?(d(),w("div",Dt,[n("div",St,[t(x,{class:"profile-card--button font-weight-light text-none",variant:"outlined",color:"#333132","prepend-icon":"mdi-pencil",onClick:D},{default:e(()=>o[7]||(o[7]=[m(" Редактировать ")])),_:1}),t(x,{class:"profile-card--button font-weight-light text-none ml-3",color:"error",variant:"outlined","prepend-icon":"mdi-logout",onClick:o[0]||(o[0]=$=>b.value=!0)},{default:e(()=>o[8]||(o[8]=[m(" Выйти ")])),_:1})]),t(x,{class:"profile-card--button font-weight-light text-none ml-auto",color:"primary",variant:"outlined","prepend-icon":"mdi-face-agent",href:"https://t.me/babichbaker_course",target:"_blank"},{default:e(()=>o[9]||(o[9]=[m(" Связаться с поддержкой ")])),_:1})])):A("",!0),t(et,{class:"profile--card mb-5 rounded-xm"},{default:e(()=>[t(tt,null,{default:e(()=>[t(rt,null,{default:e(()=>[t(X,{class:N(["d-flex flex-column",{"justify-center align-center":V(s),"align-self-start":!V(s)}])},{default:e(()=>[t(at,{size:"180",class:N(["mb-2 mt-2",{"align-self-start":!V(s)}])},{default:e(()=>[t(lt,{src:O.value,alt:"Фото профиля",onError:C},null,8,["src"])]),_:1},8,["class"]),i.value?(d(),k(nt,{key:0,label:"Изменить фото",accept:"image/*","prepend-icon":"",variant:"outlined",density:"compact","hide-details":"",class:N(["mb-2",{"w-25 h-25":V(s),"max-width-250":!V(s)}]),style:{"max-height":"50px"},"onUpdate:modelValue":T},null,8,["class"])):A("",!0)]),_:1},8,["class"]),t(X,{cols:"12",md:"8"},{default:e(()=>[i.value?(d(),k(it,{key:1},{default:e(()=>[o[18]||(o[18]=n("div",{class:"d-flex justify-space-between align-center mb-4"},[n("div",{class:"profile-card--text"},"Редактирование профиля")],-1)),t(Y,{modelValue:c.value.firstName,"onUpdate:modelValue":o[2]||(o[2]=$=>c.value.firstName=$),label:"Имя",variant:"outlined",class:"mb-1",density:"compact"},null,8,["modelValue"]),t(Y,{modelValue:c.value.lastName,"onUpdate:modelValue":o[3]||(o[3]=$=>c.value.lastName=$),label:"Фамилия",variant:"outlined",class:"mb-1",density:"compact"},null,8,["modelValue"]),t(Y,{modelValue:c.value.email,"onUpdate:modelValue":o[4]||(o[4]=$=>c.value.email=$),label:"Email",variant:"outlined",class:"mb-1",density:"compact",disabled:""},null,8,["modelValue"]),n("div",Nt,[t(x,{class:"profile-card--button font-weight-light text-none",color:"#333132",onClick:F},{default:e(()=>o[16]||(o[16]=[m(" Сохранить ")])),_:1}),t(x,{color:"grey",variant:"outlined",onClick:E,class:"ml-2 profile-card--button font-weight-light text-none"},{default:e(()=>o[17]||(o[17]=[m(" Отмена ")])),_:1})])]),_:1})):(d(),w("div",Ut,[o[15]||(o[15]=n("div",{class:"d-flex justify-space-between align-center mb-4"},[n("div",{class:"profile-card--text"},"Личная информация")],-1)),t(st,{color:"#FAFAFA",class:N({"pa-0 list-left-aligned":!V(s)})},{default:e(()=>[t(W,null,{prepend:e(()=>[t(R,{icon:"mdi-account",class:"mr-2"})]),default:e(()=>[t(z,null,{default:e(()=>o[10]||(o[10]=[m("Имя")])),_:1}),t(P,null,{default:e(()=>[m(g(a.modelValue.firstName),1)]),_:1})]),_:1}),t(W,null,{prepend:e(()=>[t(R,{icon:"mdi-account-outline",class:"mr-2"})]),default:e(()=>[t(z,null,{default:e(()=>o[11]||(o[11]=[m("Фамилия")])),_:1}),t(P,null,{default:e(()=>[m(g(a.modelValue.lastName),1)]),_:1})]),_:1}),t(W,null,{prepend:e(()=>[t(R,{icon:"mdi-email",class:"mr-2"})]),default:e(()=>[t(z,null,{default:e(()=>o[12]||(o[12]=[m("Email")])),_:1}),t(P,null,{default:e(()=>[m(g(a.modelValue.email),1)]),_:1})]),_:1})]),_:1},8,["class"]),V(s)?(d(),w("div",At,[t(x,{class:"profile-card--button font-weight-light text-none",color:"#31331","prepend-icon":"mdi-pencil",variant:"outlined",onClick:D},{default:e(()=>o[13]||(o[13]=[m(" Редактировать ")])),_:1}),t(x,{class:"profile-card--button font-weight-light text-none ml-2",color:"error",variant:"outlined","prepend-icon":"mdi-logout",onClick:o[1]||(o[1]=$=>b.value=!0)},{default:e(()=>o[14]||(o[14]=[m(" Выйти ")])),_:1})])):A("",!0)]))]),_:1})]),_:1})]),_:1})]),_:1}),t(mt,{modelValue:b.value,"onUpdate:modelValue":o[6]||(o[6]=$=>b.value=$),"max-width":"400"},{default:e(()=>[t(et,null,{default:e(()=>[t(ct,null,{default:e(()=>o[19]||(o[19]=[m("Подтверждение")])),_:1}),t(tt,{class:"font-weight-light"},{default:e(()=>o[20]||(o[20]=[m("Вы действительно хотите выйти из аккаунта?")])),_:1}),t(dt,null,{default:e(()=>[t(ut),t(x,{class:"profile-card--button font-weight-light text-none",variant:"outlined",text:"",onClick:o[5]||(o[5]=$=>b.value=!1)},{default:e(()=>o[21]||(o[21]=[m("Отмена")])),_:1}),t(x,{variant:"outlined",class:"profile-card--button font-weight-light text-none",color:"error",text:"",onClick:L},{default:e(()=>o[22]||(o[22]=[m("Выйти")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Bt=U(jt,[["__scopeId","data-v-cce8d676"]]),Ft={class:"position-relative"},It={class:"text-caption text-truncate-2 course-description"},Tt={__name:"CourseCard",props:{course:{type:Object,required:!0}},setup(a){return(_,s)=>{const f=l("v-img"),r=l("v-card-title"),v=l("v-card-text"),i=l("v-btn"),c=l("v-card-actions"),b=l("v-card");return d(),k(b,{rounded:"lg",elevation:"1",class:"cabinet-card d-flex flex-column overflow-x"},{default:e(()=>[n("div",Ft,[t(f,{src:a.course.imageUrl,height:"250",cover:"",class:"rounded-t-lg",alt:a.course.title},null,8,["src","alt"])]),t(r,{class:"text-truncate"},{default:e(()=>[m(g(a.course.title),1)]),_:1}),t(v,{class:"py-1"},{default:e(()=>[s[0]||(s[0]=n("div",{class:"d-flex align-center mb-2"},null,-1)),n("div",It,g(a.course.description),1)]),_:1}),t(c,{class:"mt-auto"},{default:e(()=>[t(i,{variant:"flat",block:"",class:"card-btn-text text-none font-weight-regular w-50",color:"#333132","prepend-icon":"mdi-play",to:`/course/${a.course.id}`},{default:e(()=>[m(g(a.course.progress>0?"Продолжить":"Приступить"),1)]),_:1},8,["to"])]),_:1})]),_:1})}}},Et=U(Tt,[["__scopeId","data-v-026995e5"]]),qt={class:"filter-tabs mb-4"},Ot={class:"flexible-filter-tabs"},Lt={__name:"CourseFilterTabs",props:{modelValue:{type:String,required:!0},options:{type:Array,required:!0}},emits:["update:modelValue"],setup(a){return(_,s)=>{const f=l("v-btn");return d(),w("div",qt,[n("div",Ot,[(d(!0),w(j,null,Q(a.options,r=>(d(),k(f,{key:r.value,class:N(["filter-tab-btn font-weight-light",{"active-tab":a.modelValue===r.value}]),variant:"outlined",onClick:v=>_.$emit("update:modelValue",r.value)},{default:e(()=>[m(g(r.label),1)]),_:2},1032,["class","onClick"]))),128))])])}}},Rt=U(Lt,[["__scopeId","data-v-90bdc0d0"]]),zt={class:"mb-2"},Pt={class:"mb-6 text-grey"},Wt={key:0,class:"tooltip-wrapper"},Yt={__name:"EmptyState",props:{icon:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},actionText:{type:String,default:""},actionRoute:{type:String,default:""},actionColor:{type:String,default:"#333132"}},setup(a){return(_,s)=>{const f=l("v-icon"),r=l("v-tooltip"),v=l("v-btn"),i=l("v-card");return d(),k(i,{rounded:"lg",elevation:"1",class:"empty-card d-flex flex-column align-center justify-center"},{default:e(()=>[t(f,{icon:a.icon,size:"64",color:"grey-lighten-1",class:"mb-4"},null,8,["icon"]),n("div",zt,g(a.title),1),n("div",Pt,g(a.description),1),a.actionText?(d(),w("div",Wt,[t(r,{location:"bottom",text:"Скоро будет доступно"},{activator:e(({props:c})=>[n("div",vt(c,{class:"w-100 h-100 position-absolute"}),null,16)]),_:1}),t(v,{color:a.actionColor,to:a.actionRoute,disabled:""},{default:e(()=>[m(g(a.actionText),1)]),_:1},8,["color","to"])])):A("",!0)]),_:1})}}},ot=U(Yt,[["__scopeId","data-v-bc09bd32"]]),Ht={class:"mb-8"},Jt={class:"d-flex justify-space-between align-center mb-4"},Kt={class:"font-weight-regular"},Mt={key:2,class:"text-center py-8 mt-0 pt-0"},Zt={__name:"index",props:{title:{type:String,default:"Мои курсы"},courses:{type:Array,required:!0},filterValue:{type:String,required:!0},filterOptions:{type:Array,required:!0},emptyState:{type:Object,default:()=>({icon:"mdi-school-outline",title:"У вас пока нет курсов",description:"Вы можете найти интересные курсы в нашем каталоге",actionText:"Перейти в каталог",actionRoute:"/catalog",actionDisabled:{type:Boolean,default:!1}})}},emits:["update:filter-value"],setup(a,{emit:_}){const s=a,f=_,r=y(s.filterValue);J(()=>s.filterValue,i=>{r.value=i}),J(r,i=>{f("update:filter-value",i)});const v=G(()=>{switch(r.value){case"not-started":return s.courses.filter(i=>i.progress===0);case"in-progress":return s.courses.filter(i=>i.progress>0&&i.progress<100);case"completed":return s.courses.filter(i=>i.progress===100);default:return s.courses}});return(i,c)=>{const b=l("v-col"),S=l("v-row");return d(),w("div",Ht,[n("div",Jt,[n("h2",Kt,g(a.title),1)]),a.filterOptions&&a.filterOptions.length?(d(),k(Rt,{key:0,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=C=>r.value=C),options:a.filterOptions},null,8,["modelValue","options"])):A("",!0),v.value.length>0?(d(),k(S,{key:1},{default:e(()=>[(d(!0),w(j,null,Q(v.value,C=>(d(),k(b,{key:C.id,cols:"12",sm:"6",lg:"3"},{default:e(()=>[t(Et,{course:C},null,8,["course"])]),_:2},1024))),128))]),_:1})):(d(),w("div",Mt,[t(ot,{icon:a.emptyState.icon,title:a.emptyState.title,description:a.emptyState.description,"action-text":a.emptyState.actionText,"action-route":a.emptyState.actionRoute},null,8,["icon","title","description","action-text","action-route"])]))])}}},Gt={class:"position-relative"},Qt={class:"d-flex align-center mb-2"},Xt={class:"font-weight-light"},te={class:"text-caption"},ee={__name:"CertificateCard",props:{certificate:{type:Object,required:!0}},emits:["download","open"],setup(a){return(_,s)=>{const f=l("v-img"),r=l("v-card-title"),v=l("v-icon"),i=l("v-card-text"),c=l("v-btn"),b=l("v-card-actions"),S=l("v-card");return d(),k(S,{rounded:"lg",elevation:"1",class:"cabinet-card d-flex flex-column overflow-x"},{default:e(()=>[n("div",Gt,[t(f,{src:a.certificate.image,height:"250",cover:"",class:"rounded-t-lg bg-grey-lighten-4",alt:`Сертификат: ${a.certificate.courseName}`},null,8,["src","alt"]),s[1]||(s[1]=n("div",{class:"certificate-badge"},null,-1))]),t(r,{class:"text-truncate"},{default:e(()=>[m(g(a.certificate.courseName),1)]),_:1}),t(i,{class:"py-1"},{default:e(()=>[n("div",Qt,[t(v,{icon:"mdi-calendar",size:"small",class:"mr-1"}),n("span",Xt,"Выдан: "+g(a.certificate.issueDate),1)]),n("div",te,[t(v,{icon:"mdi-certificate",size:"small",class:"mr-1"}),s[2]||(s[2]=n("span",null,"Профессиональный сертификат",-1))])]),_:1}),t(b,{class:"mt-auto d-flex align-center justify-center ml-2 mr-2"},{default:e(()=>[t(c,{color:"#333132",variant:"outlined","prepend-icon":"mdi-download",class:"card-btn-text text-none font-weight-regular w-100",onClick:s[0]||(s[0]=C=>_.$emit("download",a.certificate.id))},{default:e(()=>s[3]||(s[3]=[m(" Скачать ")])),_:1})]),_:1})]),_:1})}}},oe=U(ee,[["__scopeId","data-v-e3097342"]]),le={class:"d-flex justify-space-between align-center mb-4"},ae={class:"font-weight-regular"},ne={__name:"index",props:{title:{type:String,default:"Мои сертификаты"},certificates:{type:Array,required:!0},emptyState:{type:Object,default:()=>({icon:"mdi-certificate-outline",title:"У вас пока нет сертификатов",description:"Завершите курс, чтобы получить сертификат"})}},setup(a){const _=f=>{console.log("Скачивание сертификата:",f)},s=f=>{console.log("Открытие сертификата:",f)};return(f,r)=>{const v=l("v-col"),i=l("v-row");return d(),w("div",null,[n("div",le,[n("h2",ae,g(a.title),1)]),t(i,null,{default:e(()=>[(d(!0),w(j,null,Q(a.certificates,c=>(d(),k(v,{key:c.id,cols:"12",sm:"6",lg:"3"},{default:e(()=>[t(oe,{certificate:c,onDownload:_,onOpen:s},null,8,["certificate"])]),_:2},1024))),128)),a.certificates.length===0?(d(),k(v,{key:0,cols:"12",class:"text-center py-8 mt-0 pt-0"},{default:e(()=>[t(ot,{icon:a.emptyState.icon,title:a.emptyState.title,description:a.emptyState.description},null,8,["icon","title","description"])]),_:1})):A("",!0)]),_:1})])}}},se="https://babichschool.ru:8080",ie={__name:"Profile",setup(a){const{mdAndDown:_}=Z(),s=y("all"),f=y(!1),r=y({firstName:"",lastName:"",email:"",imageUrl:""}),v=()=>M.getToken(),i=y([]);async function c(){try{if(f.value=!0,!M.getToken()){i.value=[];return}const D=await _t();i.value=D.map(h=>({id:h.id,title:h.title,imageUrl:h.imageUrl||"/public/main--menu3.png",progress:h.progress||0,lessonsCompleted:h.lessonsCompleted||0,totalLessons:h.totalLessons||0,certificateAvailable:h.certificateAvailable||!1}))}catch(p){console.error("Ошибка при получении курсов пользователя:",p),i.value=[]}finally{f.value=!1}}async function b(){try{f.value=!0;const p=await K.get(`${se}/users/me`,{headers:{Authorization:`Bearer ${v()}`}});r.value={firstName:p.data.firstName||"",lastName:p.data.lastName||"",email:p.data.email||"",imageUrl:p.data.imageUrl||"/EmptyAvatar.png"}}catch(p){console.error("Ошибка при получении данных пользователя:",p)}finally{f.value=!1}}pt(()=>{b(),c()});const S=y("");function C(){r.value={firstName:"",lastName:"",email:"",imageUrl:""},localStorage.removeItem("jwt_token")}const F=[{value:"all",label:"Все курсы"},{value:"not-started",label:"Не начатые"},{value:"in-progress",label:"В процессе"},{value:"completed",label:"Завершенные"}],I=G(()=>{let p="";switch(s.value){case"not-started":p="У вас нет не начатых курсов";break;case"in-progress":p="У вас нет курсов в процессе";break;case"completed":p="У вас нет завершенных курсов";break;default:p="У вас пока нет курсов"}return{icon:"mdi-book-outline",title:p,description:"Выберите другой фильтр или перейдите в каталог",actionText:"Перейти в каталог",actionRoute:"/catalog"}});return(p,D)=>{const h=l("v-col"),B=l("v-row"),T=l("v-progress-circular"),E=l("v-overlay"),q=l("v-container"),O=l("v-main"),L=l("v-app");return d(),k(L,null,{default:e(()=>[t(gt),t(O,null,{default:e(()=>[t(q,{width:V(_)?"100vw":"80vw"},{default:e(()=>[t(B,{class:"mb-2"},{default:e(()=>[t(h,{cols:"12"},{default:e(()=>D[1]||(D[1]=[n("h1",{class:"font-weight-medium"},"Личный кабинет",-1)])),_:1})]),_:1}),t(E,{"model-value":f.value,contained:"",class:"align-center justify-center"},{default:e(()=>[t(T,{indeterminate:"",size:"64"})]),_:1},8,["model-value"]),t(Bt,{modelValue:r.value,"onUpdate:modelValue":D[0]||(D[0]=u=>r.value=u),class:"mb-8",onLogout:C},null,8,["modelValue"]),t(Zt,{courses:i.value,"filter-value":s.value,"filter-options":F,"empty-state":I.value},null,8,["courses","filter-value","empty-state"]),t(ne,{certificates:S.value},null,8,["certificates"])]),_:1},8,["width"]),t(Ct)]),_:1})]),_:1})}}},de=U(ie,[["__scopeId","data-v-08fb1a52"]]);export{de as default};
