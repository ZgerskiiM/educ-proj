import{d as R,u as N,g as f,v as _,h as v,o as g,c as T,a as o,w as i,b as $,e as d,f as x,q as j,t as E,s as I,x as U,m as q,l as z,r as n,A as F,_ as K}from"./index-BAaSDoqS.js";import{A as L,_ as M}from"./AuthMobileImage.vue_vue_type_script_setup_true_lang-i1KbWJjO.js";const W={class:"page-container"},G=R({__name:"ResetPasswordPage",setup(H){const{mdAndDown:b,smAndUp:w}=N();z();const c=f(!1),l=f(""),s=_({email:""}),a=_({text:"",type:"info"}),u=v({get:()=>s.email,set:t=>{s.email=t.replace(/\s+/g,""),l.value=""}}),y=t=>{(t.key===" "||t.key==="Spacebar")&&t.preventDefault()},D=t=>{t.preventDefault();const m=(t.clipboardData||window.clipboardData).getData("text").replace(/\s+/g,"");s.email=m,l.value=""},h=()=>(l.value="",s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)?!0:(l.value="Некорректный формат электронной почты",!1):(l.value="Введите email",!1)),k=async()=>{var t,e;if(h()){c.value=!0,a.text="";try{await F.forgotPassword(s.email),a.text="Инструкции по сбросу пароля отправлены на вашу почту. Проверьте также папку Спам.",a.type="success",s.email=""}catch(r){console.error("Ошибка при запросе сброса пароля:",r),(e=(t=r.response)==null?void 0:t.data)!=null&&e.message?a.text=r.response.data.message:a.text="Произошла ошибка. Пожалуйста, попробуйте еще раз позже.",a.type="error"}finally{c.value=!1}}},P=v(()=>!s.email||c.value);return(t,e)=>{const r=n("v-card-title"),m=n("v-text-field"),V=n("v-alert"),A=n("router-link"),C=n("v-card-text"),S=n("v-btn"),B=n("v-container");return g(),T("div",W,[o(L),o(B,{class:"main-container"},{default:i(()=>[$("form",{onSubmit:U(k,["prevent"]),class:q(["align-md-center d-flex flex-column",x(b)?"w-66":"w-50"])},[o(M),o(r,{class:"align-md-center justify-center d-flex pl-0 pb-0 mb-3 font-weight-regular"},{default:i(()=>e[2]||(e[2]=[d(" Воccтановление пароля ")])),_:1}),o(m,{class:"w-100 font-weight-light mb-3",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=p=>u.value=p),label:"Почта",hint:"Отправим ссылку восстановления на почту","persistent-hint":"",variant:"outlined",density:x(w)?"comfortable":"compact","error-messages":l.value,onKeydown:y,onPaste:D},null,8,["modelValue","density","error-messages"]),a.text?(g(),j(V,{key:0,type:a.type,variant:"tonal",closable:"",class:"mb-3 w-100","onClick:close":e[1]||(e[1]=p=>a.text="")},{default:i(()=>[d(E(a.text),1)]),_:1},8,["type"])):I("",!0),o(C,{class:"w-100 justify-center d-flex mt-0 pt-0 pl-0 font-weight-light"},{default:i(()=>[e[4]||(e[4]=d(" Уже есть аккаунт?   ")),o(A,{to:"/login"},{default:i(()=>e[3]||(e[3]=[d(" Войдите")])),_:1})]),_:1}),o(S,{class:"text-none mb-2 w-100 font-weight-thin",type:"submit",text:"Отправить",disabled:P.value,loading:c.value,flat:""},null,8,["disabled","loading"])],34)]),_:1})])}}}),Q=K(G,[["__scopeId","data-v-0579b12f"]]);export{Q as default};
