import{_ as J,u as P,l as G,g as B,h as K,i as Q,j as W,r as d,o as n,q as w,w as o,a as s,f as C,b as t,c as m,e as l,s as f,t as N,A as V}from"./index-BAaSDoqS.js";const U="/school_%D0%B2%D0%B5%D0%BA%D1%82%D0%BE%D1%80_%D0%BF%D0%BE%D0%BB%D0%BD%D1%8B%D0%B9_w.png",X={class:"header-content"},Y={key:0,class:"left-section"},Z={class:"nav-links"},ee={href:"https://t.me/babichbaker_course",target:"_blank",rel:"noopener",class:"nav-btn support-link"},te={key:1,class:"mobile-header-content"},oe={class:"mobile-right-section"},se={key:2,class:"right-section"},ne={key:0,class:"auth-buttons"},le={class:"user-info"},ae={class:"user-name"},ie={class:"mobile-menu"},re={class:"menu-header"},ue={class:"menu-content"},de={class:"menu-navigation"},ce={key:0,class:"user-section"},ve={class:"user-info-text"},me={class:"user-name"},fe={key:1,class:"auth-section"},pe={__name:"Header",setup(_e){const{mdAndDown:$,smAndDown:y}=P(),p=G(),_=B(0),D=B(!1),r=B(null),g=B(!1),h=K(()=>D.value&&r.value),A=()=>{p.push("/")},S=()=>{p.push("/profile")},E=()=>{p.push("/cart")},T=()=>{p.push("/login")},I=()=>{p.push("/register")},j=()=>{g.value=!g.value},H=()=>{g.value=!1},b=u=>{g.value=!1,p.push(u)},k=()=>{const u=localStorage.getItem("cart");if(u){const e=JSON.parse(u);_.value=e.length}else _.value=0},z=async()=>{if(D.value=V.isAuthenticated(),D.value)try{r.value=await V.getUserData()}catch(u){console.error("Error fetching user data:",u),D.value=!1,r.value=null}};return Q(()=>{k(),z(),window.addEventListener("storage",k),window.addEventListener("cartUpdated",k),window.addEventListener("storage",u=>{u.key==="jwt_token"&&z()})}),W(()=>{window.removeEventListener("storage",k),window.removeEventListener("cartUpdated",k)}),(u,e)=>{const i=d("v-btn"),c=d("v-icon"),L=d("v-badge"),x=d("v-img"),M=d("v-avatar"),O=d("v-container"),R=d("v-app-bar"),q=d("v-overlay"),F=d("v-layout");return n(),w(F,{class:"mb-16"},{default:o(()=>[s(R,{class:"upper-wrapper justify-center",elevation:"0",height:"80",app:""},{default:o(()=>[s(O,{width:C(y)?"100vw":C($)?"95vw":"60vw"},{default:o(()=>{var v;return[t("div",X,[C(y)?f("",!0):(n(),m("div",Y,[t("div",{class:"logo"},[t("img",{src:U,class:"logo__img",style:{cursor:"pointer"},onClick:A})]),e[9]||(e[9]=t("div",{class:"divider"},null,-1)),t("div",Z,[s(i,{color:"white",to:"/catalog",class:"nav-btn",variant:"text"},{default:o(()=>e[7]||(e[7]=[l("Каталог")])),_:1}),t("a",ee,[s(i,{color:"white",variant:"text"},{default:o(()=>e[8]||(e[8]=[t("span",{class:"nav-btn"},"Поддержка",-1)])),_:1})])])])),C(y)?(n(),m("div",te,[t("div",{class:"mobile-logo-section"},[t("img",{src:U,class:"mobile-full-logo",onClick:A})]),t("div",oe,[t("div",{class:"cart-container",onClick:E},[s(L,{content:_.value,"model-value":_.value>0,color:"red","offset-x":"8","offset-y":"8"},{default:o(()=>[s(i,{icon:"",variant:"text",color:"white",size:"small"},{default:o(()=>[s(c,{size:"20"},{default:o(()=>e[10]||(e[10]=[l("mdi-cart-outline")])),_:1})]),_:1})]),_:1},8,["content","model-value"])]),s(i,{icon:"",variant:"text",color:"white",onClick:j,class:"menu-toggle-btn"},{default:o(()=>[s(c,{size:"24"},{default:o(()=>e[11]||(e[11]=[l("mdi-menu")])),_:1})]),_:1})])])):f("",!0),C(y)?f("",!0):(n(),m("div",se,[t("div",{class:"cart-container",onClick:E},[s(L,{content:_.value,"model-value":_.value>0,color:"red","offset-x":"10","offset-y":"10"},{default:o(()=>[s(i,{icon:"",variant:"text",color:"white"},{default:o(()=>[s(c,null,{default:o(()=>e[12]||(e[12]=[l("mdi-cart-outline")])),_:1})]),_:1})]),_:1},8,["content","model-value"])]),h.value?f("",!0):(n(),m("div",ne,[s(i,{onClick:T,color:"white",variant:"outlined",class:"auth-btn",size:"small"},{default:o(()=>e[13]||(e[13]=[l(" Войти ")])),_:1}),s(i,{onClick:I,color:"white",variant:"flat",class:"auth-btn register-btn",size:"small"},{default:o(()=>e[14]||(e[14]=[l(" Регистрация ")])),_:1})])),h.value?(n(),m("div",{key:1,class:"profile-container",onClick:S},[t("div",le,[t("span",ae,N(((v=r.value)==null?void 0:v.firstName)||"Пользователь"),1)]),s(M,{class:"profile-avatar",rounded:""},{default:o(()=>{var a;return[(a=r.value)!=null&&a.imageUrl?(n(),w(x,{key:0,src:r.value.imageUrl},null,8,["src"])):(n(),w(x,{key:1,src:"/user.png",class:"black-icon"}))]}),_:1})])):f("",!0)]))])]}),_:1},8,["width"])]),_:1}),s(q,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=v=>g.value=v),class:"mobile-menu-overlay","z-index":9999},{default:o(()=>{var v;return[t("div",ie,[t("div",re,[t("img",{src:U,class:"menu-logo",onClick:A}),s(i,{icon:"",variant:"text",color:"white",onClick:H,class:"close-btn"},{default:o(()=>[s(c,{size:"28"},{default:o(()=>e[15]||(e[15]=[l("mdi-close")])),_:1})]),_:1})]),t("div",ue,[t("div",de,[t("div",{class:"menu-item",onClick:e[0]||(e[0]=a=>b("/catalog"))},[s(c,{color:"#f48a21",class:"menu-item-icon"},{default:o(()=>e[16]||(e[16]=[l("mdi-view-grid-outline")])),_:1}),e[17]||(e[17]=t("span",null,"Каталог",-1))]),t("div",{class:"menu-item",onClick:e[1]||(e[1]=a=>b("/about"))},[s(c,{color:"#f48a21",class:"menu-item-icon"},{default:o(()=>e[18]||(e[18]=[l("mdi-information-outline")])),_:1}),e[19]||(e[19]=t("span",null,"О нас",-1))]),t("div",{class:"menu-item",onClick:e[2]||(e[2]=a=>b("/support"))},[s(c,{color:"#f48a21",class:"menu-item-icon"},{default:o(()=>e[20]||(e[20]=[l("mdi-help-circle-outline")])),_:1}),e[21]||(e[21]=t("span",null,"Поддержка",-1))])]),e[25]||(e[25]=t("div",{class:"menu-divider"},null,-1)),h.value?(n(),m("div",ce,[t("div",{class:"user-avatar-section",onClick:e[3]||(e[3]=a=>b("/profile"))},[s(M,{class:"profile-avatar",rounded:""},{default:o(()=>{var a;return[(a=r.value)!=null&&a.imageUrl?(n(),w(x,{key:0,src:r.value.imageUrl},null,8,["src"])):(n(),w(x,{key:1,src:"/user.png",class:"black-icon"}))]}),_:1}),t("div",ve,[t("span",me,N(((v=r.value)==null?void 0:v.firstName)||"Пользователь"),1),e[22]||(e[22]=t("span",{class:"user-action"},"Перейти в профиль",-1))])])])):f("",!0),h.value?f("",!0):(n(),m("div",fe,[s(i,{onClick:e[4]||(e[4]=a=>b("/login")),color:"white",variant:"outlined",class:"auth-btn mobile-auth-btn",block:""},{default:o(()=>e[23]||(e[23]=[l(" Войти ")])),_:1}),s(i,{onClick:e[5]||(e[5]=a=>b("/register")),color:"white",variant:"flat",class:"auth-btn mobile-auth-btn register-btn",block:""},{default:o(()=>e[24]||(e[24]=[l(" Регистрация ")])),_:1})]))])])]}),_:1},8,["modelValue"])]),_:1})}}},be=J(pe,[["__scopeId","data-v-b98d0faa"]]);export{be as A};
