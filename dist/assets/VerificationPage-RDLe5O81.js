import{d as R,u as q,a as u,p as A,o as f,c as p,e as n,w as r,f as _,t as l,h as g,g as d,m as S,i as I,n as N,j as $,q as j,A as v,k as a,_ as M}from"./index-Bej0i4H5.js";import{A as P,_ as U}from"./AuthMobileImage.vue_vue_type_script_setup_true_lang-D8DQj0Jg.js";const z={class:"page-container"},E={key:0,class:"mt-2"},F=R({__name:"VerificationPage",setup(G){const{mdAndDown:b,smAndUp:w}=q(),x=$(),y=j(),o=u({email:"",verificationCode:""}),h=y.query.email;o.email=h;const t=u({remainingTime:10,resendButtonText:"Отправить повторно",isResendDisabled:!1,timer:null}),m=()=>{t.isResendDisabled=!0,t.resendButtonText=`Повторно через ${t.remainingTime} сек`,t.timer=setInterval(()=>{t.remainingTime--,t.resendButtonText=`Повторно через ${t.remainingTime} сек`,t.remainingTime<=0&&(t.timer&&clearInterval(t.timer),t.isResendDisabled=!1,t.resendButtonText="Отправить повторно",t.remainingTime=10)},1e3)},T=async()=>{try{const e=await v.resend(o.email);m()}catch(e){e.response?(console.error("Ошибка сервера:",e.response.data),console.error("Код статуса:",e.response.status)):e.request?console.error("Ошибка запроса:",e.request):console.error("Ошибка:",e.message)}},C=async()=>{try{const e=await v.verify(o.email,o.verificationCode);x.push("/login")}catch(e){e.response?(console.error("Ошибка сервера:",e.response.data),console.error("Код статуса:",e.response.status)):e.request?console.error("Ошибка запроса:",e.request):console.error("Ошибка:",e.message)}};return A(()=>{m()}),(e,s)=>{const V=a("v-text-field"),k=a("router-link"),B=a("v-card-text"),c=a("v-btn"),D=a("v-container");return f(),p("div",z,[n(P),n(D,{class:"main-container"},{default:r(()=>[_("form",{onSubmit:s[1]||(s[1]=I((...i)=>e.handleSignup&&e.handleSignup(...i),["prevent"])),class:N(["align-md-center d-flex flex-column",g(b)?"w-66":"w-50"])},[n(U),_("div",null,"Отправили код-подтверждение на "+l(o.email),1),n(V,{class:"w-100 font-weight-light",modelValue:o.verificationCode,"onUpdate:modelValue":s[0]||(s[0]=i=>o.verificationCode=i),label:"Код-подтверждение",variant:"outlined",density:g(w)?"comfortable":"compact"},null,8,["modelValue","density"]),n(B,{class:"w-100 justify-center d-flex mt-0 pt-0 pl-0 font-weight-light"},{default:r(()=>[s[3]||(s[3]=d(" Забыли пароль?   ")),n(k,{to:"reset-password"},{default:r(()=>s[2]||(s[2]=[d(" Восстановить")])),_:1})]),_:1}),e.message?(f(),p("p",E,l(e.message),1)):S("",!0),n(c,{class:"text-none mb-2 w-100 font-weight-thin",text:"Создать профиль",type:"submit",onClick:C,flat:""}),n(c,{class:"text-none mb-2 w-100 font-weight-thin",type:"button",disabled:t.isResendDisabled,onClick:T,flat:""},{default:r(()=>[d(l(t.resendButtonText),1)]),_:1},8,["disabled"])],34)]),_:1})])}}}),K=M(F,[["__scopeId","data-v-3bcc8bd3"]]);export{K as default};
