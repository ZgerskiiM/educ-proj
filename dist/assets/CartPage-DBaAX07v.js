import{_ as G}from"./image1-BuOak54M.js";import{d as K,u as Q,g as c,i as W,h as m,o as v,c as p,a as o,w as s,b as e,f as y,e as i,v as x,F as V,l as X,t as _,m as Y,r as a,_ as Z}from"./index-r6CkWk_M.js";import{A as tt}from"./Header-Cn-_yNmi.js";import{A as et}from"./AppFooter-7TrP2N6X.js";const ot={class:"cart-page"},st={class:"back-link mb-4"},lt={class:"cart-content"},at={class:"cart-items"},nt={key:0,class:"empty-cart"},rt={class:"cart-item-img"},it={class:"cart-item-details"},dt={class:"cart-item-title"},ut={class:"cart-item-price"},ct={class:"cart-item-remove"},mt={key:0,class:"cart-summary"},vt={class:"cart-summary-card"},pt={class:"checkout-form"},_t={class:"form-group mb-4"},ft={class:"form-group mb-4"},gt={class:"promo-container"},wt={class:"order-summary"},kt={class:"summary-row"},Ct={class:"summary-row"},bt={class:"summary-row total"},yt=K({__name:"CartPage",setup(xt){const S=Y(),{mdAndDown:A,smAndDown:L}=Q(),k=c(""),f=c(""),u=c(0),g=c(!1),d=c([]);W(()=>{const n=localStorage.getItem("cart");n&&(d.value=JSON.parse(n))});const w=m(()=>d.value.reduce((n,t)=>{const r=parseFloat(t.price.replace(/\s+/g,"").replace(/[^\d.-]/g,""));return n+r},0)),P=m(()=>w.value-u.value),U=m(()=>w.value.toLocaleString("ru-RU")),$=m(()=>u.value.toLocaleString("ru-RU")),D=m(()=>P.value.toLocaleString("ru-RU")),F=n=>{d.value.splice(n,1),N(),window.dispatchEvent(new Event("cartUpdated"))},N=()=>{localStorage.setItem("cart",JSON.stringify(d.value))},I=()=>{f.value.toLowerCase()==="скидка10"?u.value=w.value*.1:f.value.toLowerCase()==="скидка20"?u.value=w.value*.2:(u.value=0,alert("Промокод не найден"))},R=()=>{S.push("/login")};return(n,t)=>{const r=a("v-btn"),B=a("v-img"),E=a("v-icon"),C=a("v-text-field"),T=a("v-card-title"),J=a("v-card-text"),O=a("v-spacer"),z=a("v-card-actions"),H=a("v-card"),M=a("v-dialog"),h=a("v-container"),j=a("v-main"),q=a("v-app");return v(),p(V,null,[o(tt),o(q,null,{default:s(()=>[o(j,null,{default:s(()=>[e("div",ot,[t[24]||(t[24]=e("div",{class:"cart-image-left"},[e("img",{src:G,alt:"Декоративное изображение",class:"decoration-image"})],-1)),o(h,{class:"cart-container",width:y(L)?"100vw":y(A)?"95vw":"60vw"},{default:s(()=>[t[23]||(t[23]=e("h1",{class:"cart-title"},"Корзина",-1)),e("div",st,[o(r,{variant:"outlined",color:"black","prepend-icon":"mdi-arrow-left",class:"back-btn",onClick:t[0]||(t[0]=l=>n.$router.push("/catalog"))},{default:s(()=>t[7]||(t[7]=[i(" Вернуться в каталог ")])),_:1})]),e("div",lt,[e("div",at,[d.value.length===0?(v(),p("div",nt,[t[9]||(t[9]=e("p",null,"Ваша корзина пуста",-1)),o(r,{color:"#ff8a04",class:"white--text mt-4",onClick:t[1]||(t[1]=l=>n.$router.push("/catalog"))},{default:s(()=>t[8]||(t[8]=[i(" Перейти в каталог ")])),_:1})])):x("",!0),(v(!0),p(V,null,X(d.value,(l,b)=>(v(),p("div",{key:b,class:"cart-item"},[e("div",rt,[o(B,{src:l.image,width:"150",height:"100",cover:"",class:"rounded-lg"},null,8,["src"])]),e("div",it,[e("h3",dt,_(l.title),1)]),e("div",ut,_(l.price),1),e("div",ct,[o(r,{icon:"",variant:"text",onClick:Vt=>F(b)},{default:s(()=>[o(E,null,{default:s(()=>t[10]||(t[10]=[i("mdi-close-circle-outline")])),_:1})]),_:2},1032,["onClick"])])]))),128))]),d.value.length>0?(v(),p("div",mt,[e("div",vt,[t[18]||(t[18]=e("h2",{class:"summary-title"},"Итог",-1)),e("div",pt,[e("div",_t,[t[11]||(t[11]=e("label",{class:"form-label"},"Почта",-1)),o(C,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=l=>k.value=l),variant:"outlined",placeholder:"your@email.ru","hide-details":"",density:"comfortable",class:"checkout-input"},null,8,["modelValue"])]),e("div",ft,[t[13]||(t[13]=e("label",{class:"form-label"},"Промокод",-1)),e("div",gt,[o(C,{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=l=>f.value=l),variant:"outlined",placeholder:"Введите промокод","hide-details":"",density:"comfortable",class:"checkout-input"},null,8,["modelValue"]),o(r,{variant:"text",class:"promo-btn",onClick:I},{default:s(()=>t[12]||(t[12]=[i("Применить")])),_:1})])]),e("div",wt,[e("div",kt,[t[14]||(t[14]=e("span",null,"Цена",-1)),e("span",null,_(U.value)+" ₽",1)]),e("div",Ct,[t[15]||(t[15]=e("span",null,"Скидка",-1)),e("span",null,_($.value)+" ₽",1)]),e("div",bt,[t[16]||(t[16]=e("span",null,"Итог",-1)),e("span",null,_(D.value)+" ₽",1)])]),o(r,{color:"#ff8a04",size:"large",block:"",class:"white--text mt-6 checkout-btn",onClick:t[4]||(t[4]=l=>g.value=!0)},{default:s(()=>t[17]||(t[17]=[i(" Оплатить ")])),_:1})])])])):x("",!0)]),o(M,{modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=l=>g.value=l),"max-width":"400"},{default:s(()=>[o(H,null,{default:s(()=>[o(T,null,{default:s(()=>t[19]||(t[19]=[i("Требуется авторизация")])),_:1}),o(J,null,{default:s(()=>t[20]||(t[20]=[i("Для оплаты заказа необходимо войти в аккаунт.")])),_:1}),o(z,null,{default:s(()=>[o(O),o(r,{color:"#ff8a04",class:"text-none",variant:"outlined",onClick:R},{default:s(()=>t[21]||(t[21]=[i("Войти")])),_:1}),o(r,{class:"text-none",variant:"outlined",onClick:t[5]||(t[5]=l=>g.value=!1)},{default:s(()=>t[22]||(t[22]=[i("Отмена")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["width"])]),o(et)]),_:1})]),_:1})],64)}}}),Ut=Z(yt,[["__scopeId","data-v-427ed993"]]);export{Ut as default};
